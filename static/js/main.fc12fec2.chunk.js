(this["webpackJsonptri-tap"]=this["webpackJsonptri-tap"]||[]).push([[0],{28:function(e,t){},465:function(e,t,a){},470:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(57),i=a.n(r),l=(a(66),a(5)),o=a(15),u=a(4);function m(e){return window.sessionStorage.getItem(e)||""}var s={items:[{label:"date",field:"date",type:"hidden"},{label:"Name",field:"name"},{label:"Age",field:"age",type:"number"}],getItem:m,setItem:function(e,t){window.sessionStorage.setItem(e,t)},isValid:function(){return m("date")===(new Date).toLocaleDateString()&&m("name")}},f=a(16),d=a(58),b=a.n(d),v=a(59),p=a(21),E=a(472),h={name:"unspecified",age:"unspecified"};function g(e){var t=e.id,a=void 0===t?Object(E.a)():t,n=e.timestamp,c=void 0===n?Date.now():n,r=e.winNavUa,i=void 0===r?window.navigator.userAgent:r;return Object(v.a)({id:a,timestamp:c,winNavUa:i},s.items.map((function(e){var t=e.field;return Object(p.a)({},t,s.getItem(t)||h[t])})),{},e)}var w=a(17),j=a.n(w);j.a.config.region="us-east-2",j.a.config.credentials=new j.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-2:1056edee-e9e2-4c61-8f7e-45d31a5ab8a4"});var y=new j.a.DynamoDB.DocumentClient;var O="Press";function S(e){for(var t,a=e.clicks,n=e.reset,r=[{item:"Date",value:new Date(a[0].timeStamp).toLocaleDateString()},{item:"Time",value:new Date(a[0].timeStamp).toLocaleTimeString()}],i=[],l=0;l<5;l+=1){var o=2*l,u=(t=a[o].timeStamp,a[o+1].timeStamp-t),m=Math.round(1e3*a[o+1].pressure)/10;r.push({item:"Delay ".concat(l+1),value:"".concat(u,"ms [").concat(m,"%]")}),i.push(u)}return r.push({item:"Average",value:"".concat(Math.round(i.reduce((function(e,t){return e+t}),0)/i.length),"ms")}),c.a.createElement("div",{className:"modal is-active"},c.a.createElement("div",{className:"modal-background"}),c.a.createElement("div",{className:"modal-content has-background-white has-text-centered"},c.a.createElement("div",{className:"my-2",style:{maxHeight:"70%",overflow:"auto"}},c.a.createElement("table",{className:"table is-size-7"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Event"),c.a.createElement("th",null,"Result"))),c.a.createElement("tbody",null,r.map((function(e){return c.a.createElement("tr",{key:e.item},c.a.createElement("td",null,e.item),c.a.createElement("td",null,e.value))}))))),c.a.createElement("div",{className:"button is-primary",onClick:n},"Restart")))}var D=function(){var e=Object(n.useState)(O),t=Object(l.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),o=Object(l.a)(i,2),u=o[0],m=o[1],s=Object(n.useState)(!1),d=Object(l.a)(s,2),v=d[0],p=d[1],E=Object(n.useState)(!1),h=Object(l.a)(E,2),w=h[0],j=h[1],D=Object(n.useState)(!1),N=Object(l.a)(D,2),k=N[0],T=N[1],I=Object(n.useState)(!1),x=Object(l.a)(I,2),L=x[0],P=x[1],M=Object(n.useRef)(null),C=Object(n.useRef)(0);Object(n.useEffect)((function(){b.a.set("#circle",{start:function(){C.current=0},change:function(e){C.current=e>C.current?e:C.current},unsupported:function(){C.current=-1}},{only:"touch",polyfill:!1})}),[]);var R=function(){for(var e=[],t=Date.now(),a=function(a){e.push(new Promise((function(e,n){var c,r,i=g({timeStamp:t,trigger:u[a].timeStamp,lift:u[a+1].timeStamp,pressure:u[a+1].pressure});(c=i,r="lift",new Promise((function(e,t){y.put({Item:c,TableName:r},(function(a,n){a?t("Error: data was not saved to ".concat(r)):e()}))}))).then(e).catch(n)})))},n=0;n<u.length;n+=2)a(n);return Promise.all(e)};return Object(n.useEffect)((function(){var e=1500+Math.round(250*Math.random());k&&(M.current=setTimeout((function(){P(!0),m((function(e){return[].concat(Object(f.a)(e),[{timeStamp:Date.now()}])}))}),e))}),[k]),Object(n.useEffect)((function(){10===u.length&&j(!0)}),[u]),c.a.createElement("div",{className:"px-4 py-4"},c.a.createElement("div",{className:"has-text-weight-semibold mb-4"},"Press with your thumb. When the border turns red, lift your thumb. Repeat five times."),c.a.createElement("section",{className:"section py-0 lift",style:{position:"absolute",bottom:20,left:"50%",transform:"translate(-50%)"}},c.a.createElement("div",{id:"circle",className:"circle ".concat(k&&"pressed"," ").concat(L&&"triggered"),onPointerDown:function(e){a===O&&(p(!0),T(!0))},onPointerUp:function(e){T(!1),v&&a===O&&(L?(r("Good"),m([].concat(Object(f.a)(u),[{timeStamp:Date.now(),pressure:C.current}]))):(r("!"),clearTimeout(M.current)),p(!1),P(!1),setTimeout((function(){return r(O)}),1500))}},a)),w&&c.a.createElement(S,{clicks:u,reset:function(){R().finally((function(){j(!1),m([]),function(e,t){r(e),p(t)}(O,!1)}))}}))};a(465);function N(e){var t=e.clicks,a=e.reset,n=[{item:"Date",value:new Date(t[0]).toLocaleDateString()},{item:"Time",value:new Date(t[0]).toLocaleTimeString()}],r=[];return["2-Tap Int 1","3-Tap Int 1","3-Tap Int 2","4-Tap Int 1","4-Tap Int 2","4-Tap Int 3"].forEach((function(e,a){var c,i=0===a?[1,2]:a<3?[a+2,a+3]:[a+3,a+4],l=(c=t[i[0]],t[i[1]]-c);n.push({item:e,value:"".concat(l,"ms")}),r.push(l)})),n.push({item:"Average",value:"".concat(Math.round(r.reduce((function(e,t){return e+t}),0)/r.length),"ms")}),c.a.createElement("div",{className:"overlay"},c.a.createElement("div",{className:"modal"},c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Event"),c.a.createElement("th",null,"Result"))),c.a.createElement("tbody",null,n.map((function(e){return c.a.createElement("tr",{key:e.item},c.a.createElement("td",null,e.item),c.a.createElement("td",null,e.value))})))),c.a.createElement("div",{className:"reset",onClick:a},"Restart")))}var k=function(){var e=Object(n.useState)("Start"),t=Object(l.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),o=Object(l.a)(i,2),u=o[0],m=o[1],s=Object(n.useState)(!1),d=Object(l.a)(s,2),b=d[0],v=d[1],p=Object(n.useState)(!1),E=Object(l.a)(p,2),h=E[0],g=E[1],w=function(e,t){r(e),v(t)};return Object(n.useEffect)((function(){switch(u.length){case 1:setTimeout((function(){w("2",!0)}),500);break;case 3:w("Good",!1),setTimeout((function(){w("3",!0)}),1500);break;case 6:w("Good",!1),setTimeout((function(){w("4",!0)}),1500);break;case 10:w("Done",!1),setTimeout((function(){g(!0)}),1500)}}),[u]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"header"},"Tap Start.  When a number appears, tap the circle that many times as quickly as you can.  Use only your thumb."),c.a.createElement("div",{className:"tap"},c.a.createElement("div",{className:"circle ".concat(b&&"active"),onClick:function(e){if(0===u.length)r("");else if(!b)return;m([].concat(Object(f.a)(u),[Date.now()]))}},a)),h&&c.a.createElement(N,{clicks:u,reset:function(){m([]),w("Start",!1),g(!1)}}))},T=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],I=function(e){return"date"===e?(new Date).toLocaleDateString():s.getItem(e)||""};function x(e){var t=e.onSubmit,a=Object(n.useState)(!1),r=Object(l.a)(a,2),i=r[0],o=r[1];return i?c.a.createElement(u.a,{to:"/lift"}):c.a.createElement("div",{className:"px-4 py-4"},c.a.createElement("div",{className:"has-text-weight-semibold mb-4"},"My ",T[(new Date).getDay()]," Status"),c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(e){var a=t(e);o(a)}},s.items.map((function(e){e.label;var t=e.field,a=e.type;return c.a.createElement("div",{key:t},"hidden"!==a&&c.a.createElement("label",{htmlFor:t},t),c.a.createElement("input",{className:"input mb-4",id:t,name:t,defaultValue:I(t),type:a||"text"}))})),c.a.createElement("div",null,c.a.createElement("input",{className:"button is-primary",type:"submit",value:"Continue"})))))}function L(e){e.x;var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],i=a[1],o=Object(n.useState)({}),u=Object(l.a)(o,2),m=u[0],s=u[1];Object(n.useEffect)((function(){var e;(e="lift",new Promise((function(t,a){y.scan({TableName:e},(function(e,n){e?a("data cannot be retrieved"):t(n.Items)}))}))).then(i)}),[]),Object(n.useEffect)((function(){var e={};r.map((function(t){return Object.keys(t).map((function(t){return e[t]=!0}))})),s(e)}),[r]);var f='"'.concat(Object.keys(m).join('","'),'"\n');return r.map((function(e){var t=[];Object.keys(m).map((function(a){t.push(e[a])})),f+='"'.concat(t.join('","'),'"\n')})),c.a.createElement("textarea",{style:{fontSize:"6px",height:"99vh",width:"99vw"},value:f})}function P(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){r((function(e){return s.isValid()}))}),[]);var i=function(e){if(e.preventDefault(),s.items.forEach((function(t){var a=t.field,n=(e.target[a].value||"").trim();console.log(a,n),n&&s.setItem(a,n)})),s.isValid())return r(!0),setTimeout((function(){return window.scrollTo(0,0)}),500),!0};return c.a.createElement(o.a,null,c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/data/:table(lift|tap)",render:function(e){return c.a.createElement(L,{rp:e})}}),c.a.createElement(u.b,null,c.a.createElement("nav",{className:"navbar has-background-info-dark",role:"navigation","aria-label":"main navigation"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement(o.b,{className:"navbar-item is-size-7 has-text-white",to:"/user"},[(new Date).toLocaleDateString(),s.getItem("name")].map((function(e){return e?c.a.createElement(c.a.Fragment,null,e,c.a.createElement("br",null)):null}))),a&&c.a.createElement(o.b,{className:"navbar-item has-text-white",to:"/lift"},"Lift"),!1)),a?c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/lift"},c.a.createElement(D,null)),c.a.createElement(u.b,{path:"/tap"},c.a.createElement(k,null)),c.a.createElement(u.b,null,c.a.createElement(x,{onSubmit:i}))):c.a.createElement(x,{onSubmit:i}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.addEventListener("contextmenu",(function(e){e.preventDefault()})),i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t,a){e.exports=a(470)},66:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.fc12fec2.chunk.js.map
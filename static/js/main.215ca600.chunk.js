(this["webpackJsonptri-tap"]=this["webpackJsonptri-tap"]||[]).push([[0],{38:function(e,t,a){e.exports=a(60)},43:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(21),r=a.n(s),l=(a(43),a(5)),i=a(19),o=a(34),u=a(12),m=a(1),d=a(37),b=a(2);function f(e){var t=e.split(":").reverse(),a=Object(b.a)(t,2),n=a[0],c=a[1],s=0;return n&&(s+=1e3*+n),c&&(s+=1e3*+c*60),s}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=[e.getFullYear()],a=e.getMonth()+1;t.push(a<10?"0".concat(a):a);var n=e.getDate();return t.push(n<10?"0".concat(n):n),t.join("-")}var E="local",v=[{name:"hash",db:"session"},{name:"workout",db:E}],p=function(e){var t=v.find((function(t){return t.name===e}));return t&&t.db};var O={setItem:function(e,t){p(e)===E?window.localStorage.setItem(e,t):window.sessionStorage.setItem(e,t)},getItem:function(e){return p(e)===E?window.localStorage.getItem(e):window.sessionStorage.getItem(e)},removeItem:function(e){p(e)===E?window.localStorage.removeItem(e):window.sessionStorage.removeItem(e)}},g=[0,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3,3.25,3.5,3.75,4,4.25,4.5,4.75,5,5.25,5.5,5.75,6,6.25,6.5,6.75,7,7.25,7.5,7.75,8,8.25,8.5,8.75,9,9.25,9.5,9.75,10],j=function(e){return e.reduce((function(e,t,a){return Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},g[a],t))}),{})},N={motivated:j([0,2.5,3.125,3.75,4.375,5,5.625,6.25,6.875,7.5,8.125,8.75,9.375,10,10.625,11.25,11.875,12.5,13.125,13.75,14.375,15,15.625,16.25,16.875,17.5,18.125,18.75,19.375,20,20.625,21.25,21.875,22.5,23.125,23.75,24.375,25]),fast:j([0,2.5,3.125,3.75,4.375,5,5.625,6.25,6.875,7.5,8.125,8.75,9.375,10,10.625,11.25,11.875,12.5,13.125,13.75,14.375,15,15.625,16.25,16.875,17.5,18.125,18.75,19.375,20,20.625,21.25,21.875,22.5,23.125,23.75,24.375,25]),sleep:j([0,2.5,3.125,3.75,4.375,5,5.625,6.25,6.875,7.5,8.125,8.75,9.375,10,10.625,11.25,11.875,12.5,13.125,13.75,14.375,15,15.625,16.25,16.875,17.5,18.125,18.75,19.375,20,20.625,21.25,21.875,22.5,23.125,23.75,24.375,25]),sleepHours:j([0,1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.45,1.6,1.95,2.5,3.3,4.2,5.2,6.3,7.5,8.8,10.2,11.7,13.45,15.2,16.95,18.45,19.7,20.95,22.2,23.2,23.95,24.45,24.75,24.9,25,25,25,25,25])},y="https://q1yg2vh97k.execute-api.us-east-2.amazonaws.com/live",x=function(e,t,a){var n={method:e,headers:{"Content-Type":"application/json"}};return a&&(n.body=JSON.stringify(a)),fetch(t,n).then((function(e){return 200===e.status?e:new Error})).then((function(e){return e.json()}))},w=function(e){return function(t){return x("GET","".concat(y,"/hiitrx?hash=").concat(e)).then((function(e){return e?(O.setItem("hash",e.hash),t(S(e)),Promise.resolve(e.hash)):(O.removeItem("hash"),t(T()),Promise.reject())})).catch((function(){return Promise.reject()}))}},k=function(){return function(e,t){var a=t(),n=(a.fitnessTests,Object(d.a)(a,["fitnessTests"]));return x("POST","".concat(y,"/hiitrx"),Object(m.a)(Object(m.a)({},n),{},{date:h()}))}},S=function(e){return{type:"LOAD",payload:e}},T=function(){return{type:"RESET"}},I="LOAD",C="RESET",R="SET_ACTIVITY",H="SET_EFFORT",D="SET_TODAY",F="SET_LIFTS",_="SET_PRESSURES",A="SET_EVENTS",P="SET_USER",L="SET_WORKOUT",W="SET_WORKOUT_COMPLETED",M={date:null,hash:null,email:null,name:null,age:null,events:[],schedule:{},fitnessTests:{}},z=Object(i.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,c=h();switch(a){case I:return Object(m.a)(Object(m.a)({},e),n);case C:return Object(m.a)(Object(m.a)({},e),M);case R:return Object(m.a)(Object(m.a)({},e),{},{schedule:Object(m.a)(Object(m.a)({},e.schedule),{},Object(u.a)({},n.date,Object(m.a)(Object(m.a)({},e.schedule[n.date]||{}),{},{activity:n.activity})))});case H:return Object(m.a)(Object(m.a)({},e),{},{schedule:Object(m.a)(Object(m.a)({},e.schedule),{},Object(u.a)({},n.date,Object(m.a)(Object(m.a)({},e.schedule[n.date]||{}),{},{effort:n.effort})))});case D:return Object(m.a)(Object(m.a)({},e),{},{schedule:Object(m.a)(Object(m.a)({},e.schedule),{},Object(u.a)({},c,Object(m.a)(Object(m.a)({},e.schedule[c]),{},{motivated:Number(n.motivated),fast:Number(n.fast),sleep:Number(n.sleep),sleepHours:Number(n.sleepHours)})))});case F:return Object(m.a)(Object(m.a)({},e),{},{schedule:Object(m.a)(Object(m.a)({},e.schedule),{},Object(u.a)({},c,Object(m.a)(Object(m.a)({},e.schedule[c]),{},{lifts:n})))});case _:return Object(m.a)(Object(m.a)({},e),{},{schedule:Object(m.a)(Object(m.a)({},e.schedule),{},Object(u.a)({},c,Object(m.a)(Object(m.a)({},e.schedule[c]),{},{pressures:n})))});case A:return Object(m.a)(Object(m.a)({},e),{},{events:n});case P:return Object(m.a)(Object(m.a)({},e),{},{name:n.name,age:n.age});case L:return Object(m.a)(Object(m.a)({},e),{},{schedule:Object(m.a)(Object(m.a)({},e.schedule),{},Object(u.a)({},c,Object(m.a)(Object(m.a)({},e.schedule[c]),{},{workout:n})))});case W:return Object(m.a)(Object(m.a)({},e),{},{schedule:Object(m.a)(Object(m.a)({},e.schedule),{},Object(u.a)({},c,Object(m.a)(Object(m.a)({},e.schedule[c]),{},{workout:Object(m.a)(Object(m.a)({},e.schedule[c].workout),{},{completed:n})})))});default:return e}}),Object(i.a)(o.a)),U=a(9),Y=a(8);var K=function(){return c.a.createElement("div",{className:"m-4"},c.a.createElement("progress",{className:"progress is-small is-success",max:"100"},"loading"))};var V=Object(Y.g)((function(e){var t=e.reset,a=e.authenticate,s=e.authenticateApp,r=e.history,l=Object(n.useState)(""),i=Object(b.a)(l,2),o=i[0],u=i[1],m=Object(n.useState)(""),d=Object(b.a)(m,2),f=d[0],h=d[1],E=Object(n.useState)(!1),v=Object(b.a)(E,2),p=v[0],g=v[1],j=Object(n.useState)(!1),N=Object(b.a)(j,2),y=N[0],x=N[1];return Object(n.useEffect)((function(){O.removeItem("hash"),t(),s(!1)}),[t,s]),c.a.createElement("div",{className:"hero"},c.a.createElement("div",{className:"hero-body has-text-centered"},c.a.createElement("section",{className:"section is-flex-grow-1"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o&&f?(g(!0),x(!1),a({email:o,password:f}).then((function(e){O.setItem("hash",e),s(!0),r.push("/home")})).catch((function(e){g(!1),x(!0)}))):x(!0)}},c.a.createElement("input",{className:"input mb-4",id:"email",name:"email",defaultValue:"",type:"text",placeholder:"email",autoComplete:"email",onChange:function(e){return u(e.target.value)}}),c.a.createElement("input",{className:"input mb-4",id:"password",name:"password",defaultValue:"",type:"password",placeholder:"password",autoComplete:"current-password",onChange:function(e){return h(e.target.value)}}),c.a.createElement("button",{className:"button is-black ".concat(p?"is-loading":""),type:"submit"},"Go")),y&&c.a.createElement("div",{className:"mt-4 has-text-danger"},"invalid"))))})),G={reset:T,authenticate:function(e){var t=e.email,a=e.password;return function(e){return x("POST","".concat(y,"/auth"),{email:t,password:a}).then((function(t){var a=t.hash;return w(a)(e)})).catch(Promise.reject)}}},J=Object(l.b)(null,G)(V),B=a(6),q=a(7);var $=function(e){var t=e.hasLifts,a=e.isWorkoutComplete;return c.a.createElement("div",{className:"is-flex is-flex-direction-column is-justify-content-center is-align-items-stretch"},t&&c.a.createElement("div",{className:"p-4 has-text-centered"},c.a.createElement(U.b,{to:a?"/workout":"/results"},c.a.createElement("button",{className:"button is-large home-button"},c.a.createElement(B.a,{className:"mr-4 has-text-success",icon:q.i}),c.a.createElement("span",null,"Today's HIITRx")))),c.a.createElement("div",{className:"p-4 has-text-centered"},c.a.createElement(U.b,{to:"/schedule"},c.a.createElement("button",{className:"button is-large home-button"},c.a.createElement(B.a,{className:"mr-4 has-text-warning",icon:q.c}),c.a.createElement("span",null,"Weekly Plan")))),c.a.createElement("div",{className:"p-4 has-text-centered"},c.a.createElement(U.b,{to:"/events"},c.a.createElement("button",{className:"button is-large home-button"},c.a.createElement(B.a,{className:"mr-1 is-size-6 has-text-grey",icon:q.j}),c.a.createElement(B.a,{className:"mr-1 is-size-6 has-text-grey",icon:q.b}),c.a.createElement(B.a,{className:"mr-4 is-size-6 has-text-grey",icon:q.g}),c.a.createElement("span",null,"Competitions")))),c.a.createElement("div",{className:"p-4 has-text-centered"},c.a.createElement(U.b,{to:"/user"},c.a.createElement("button",{className:"button is-large home-button"},c.a.createElement(B.a,{className:"mr-4 has-text-info",icon:q.l}),c.a.createElement("span",null,"User Profile")))))},Q=Object(l.b)((function(e){var t,a,n=e.schedule[h()];return{hasLifts:!!(null===n||void 0===n||null===(t=n.lifts)||void 0===t?void 0:t.length),isWorkoutComplete:!!(null===n||void 0===n||null===(a=n.workout)||void 0===a?void 0:a.completed)}}))($),X=a(35),Z=a.n(X),ee=a(10),te=a.n(ee),ae=["Less","Normal","More"];var ne=function(e){var t=e.scale,a=void 0===t?ae:t;return c.a.createElement("div",{className:"slider-scale mb-4"},a.map((function(e){return c.a.createElement("div",{key:e},e)})))},ce=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],se=(new Date).getDay(),re=function(e){return e?1===e?"Tomorrow":(t=se+e)<7?ce[t]:ce[t-7]:"Today";var t},le=["Rest up!","Enjoy your day off :)","Save some energy","Rest & refuel","Put your feet up","Remember to hydrate","Take a load off"][Math.floor(7*Math.random())];for(var ie=Object(Y.g)((function(e){var t=e.schedule,a=e.setActivity,s=e.setEffort,r=e.updateHiitrx,l=e.history,i=Object(n.useState)([]),o=Object(b.a)(i,2),u=o[0],m=o[1],d=Object(n.useRef)(Z()((function(){return r().then(te.a).catch(te.a)}),250));Object(n.useEffect)((function(){var e=[];[0,1,2,3,4,5,6].forEach((function(t){var a=new Date(Date.now()+864e5*t);e.push(h(a))})),m(e)}),[]),Object(n.useEffect)((function(){d.current()}),[t]);var f=function(){return r().then((function(){var e,a,n=(null===(e=t[u[0]])||void 0===e?void 0:e.lifts)?(null===(a=t[u[0]])||void 0===a?void 0:a.workout)?"/workout":"/results":"/today";l.push(n)})).catch((function(){return console.error("update failed")}))},E=!u.slice(0,4).map((function(e){var a;return((null===(a=t[e])||void 0===a?void 0:a.activity)||[]).includes(1)})).includes(!1);return c.a.createElement("div",{className:"table m-4"},c.a.createElement("div",{className:"headings columns is-mobile"},c.a.createElement("div",{className:"column is-3 forecast-day"},"Day"),c.a.createElement("div",{className:"column is-3 has-text-centered"},"Off"),c.a.createElement("div",{className:"column is-3 has-text-centered"},"HIIT"),c.a.createElement("div",{className:"column is-3 has-text-centered"},"Other")),u.map((function(e,r){var l,i,o,u=function(a){var n,c;return!!(null===(n=t[e])||void 0===n||null===(c=n.activity)||void 0===c?void 0:c[a])?"has-text-success":"has-text-grey-light"},m=function(t){return a({date:e,activity:t})};return c.a.createElement(n.Fragment,{key:e},c.a.createElement("div",{className:"columns is-mobile ".concat(r%2?"has-background-white-ter":"")},c.a.createElement("div",{className:"column is-3 has-text-weight-bold forecast-day"},re(r)),c.a.createElement("div",{className:"clickable column is-3 is-flex is-justify-content-center is-align-items-center",onClick:function(){return m([1,0,0])}},c.a.createElement(B.a,{className:u(0),icon:q.a,size:"lg"})),c.a.createElement("div",{className:"clickable column is-3 is-flex is-justify-content-center is-align-items-center",onClick:function(){return m([0,1,0])}},c.a.createElement(B.a,{className:u(1),icon:q.i,size:"lg"})),c.a.createElement("div",{className:"clickable column is-3 is-flex is-justify-content-center is-align-items-center is-relative",onClick:function(){return m([0,0,1])}},c.a.createElement(B.a,{className:"mx-1 ".concat(u(2)),icon:q.j,size:"sm"}),c.a.createElement(B.a,{className:"mx-1 ".concat(u(2)),icon:q.b,size:"sm"}),c.a.createElement(B.a,{className:"mx-1 ".concat(u(2)),icon:q.g,size:"sm"}))),function(e,a){var n,c;return!!(null===(n=t[e])||void 0===n||null===(c=n.activity)||void 0===c?void 0:c[1])&&0===a}(e,r)&&c.a.createElement("div",{className:"columns is-mobile ".concat(r%2?"has-background-white-ter":"")},c.a.createElement("div",{className:"column is-12 is-flex is-justify-content-center is-align-items-center"},E?c.a.createElement("button",{className:"button is-large mb-3",onClick:f},c.a.createElement(B.a,{className:"mr-4 has-text-success",icon:q.i}),c.a.createElement("span",null,"Today's HIITRx")):c.a.createElement("div",{className:"py-5 has-text-info"},"Plan the next ",4," days to get your workout"))),function(e,a){var n,c;return!!(null===(n=t[e])||void 0===n||null===(c=n.activity)||void 0===c?void 0:c[0])&&0===a}(e,r)&&c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column is-12 has-text-centered"},c.a.createElement("div",{className:"py-5 has-text-info"},le))),!!(null===(l=t[e])||void 0===l||null===(i=l.activity)||void 0===i?void 0:i[2])&&c.a.createElement("div",{className:"columns is-mobile ".concat(r%2?"has-background-white-ter":"")},c.a.createElement("div",{className:"column is-12 is-flex is-align-items-center"},c.a.createElement("div",{className:"mb-1 mx-4 has-text-centered"},"Anticipated",c.a.createElement("br",null),"Effort"),c.a.createElement("div",{className:"is-flex-grow-1 mx-4"},c.a.createElement("input",{defaultValue:null===t||void 0===t||null===(o=t[e])||void 0===o?void 0:o.effort,className:"slider is-warning is-fullwidth is-large mt-2",step:".25",min:"0",max:"10",type:"range",onChange:function(t){return s({date:e,effort:t.target.value})}}),c.a.createElement(ne,{scale:["light","moderate","hard"]})))))})))})),oe={setActivity:function(e){return{type:"SET_ACTIVITY",payload:e}},setEffort:function(e){return{type:"SET_EFFORT",payload:e}},updateHiitrx:k},ue=Object(l.b)((function(e){return{schedule:e.schedule}}),oe)(ie),me=a(16),de=(new Date).getFullYear(),be=[],fe=de;fe<de+5;fe+=1)be.push(fe);for(var he=["01","02","03","04","05","06","07","08","09","10","11","12"],Ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ve=[],pe=1;pe<32;pe+=1)ve.push(pe<10?"0".concat(pe):String(pe));var Oe=function(e){var t=e.events,a=e.setEvents,s=e.updateHiitrx,r=Object(n.useState)("01"),l=Object(b.a)(r,2),i=l[0],o=l[1],u=Object(n.useState)("01"),m=Object(b.a)(u,2),d=m[0],f=m[1],h=Object(n.useState)(de),E=Object(b.a)(h,2),v=E[0],p=E[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"table m-4"},c.a.createElement("div",{className:"headings columns is-mobile"},c.a.createElement("div",{className:"column is-12"},"My Competitions")),!t.length&&c.a.createElement("div",null,"Nothing scheduled"),t.map((function(e,n){return c.a.createElement("div",{key:"".concat(e,"-").concat(n),className:"columns is-mobile ".concat(n%2?"has-background-white-ter":"")},c.a.createElement("div",{className:"column is-10 is-flex is-align-items-center"},function(e){var t=e.split("-").map(Number),a=Object(b.a)(t,3),n=a[0],c=a[1],s=a[2];return"".concat(s," ").concat(Ee[c-1]," ").concat(n)}(e)),c.a.createElement("div",{className:"column is-2 has-text-centered"},c.a.createElement("button",{className:"button",onClick:function(){return function(e){var n=Object(me.a)(t);n.splice(e,1),a(n),s().then(te.a).catch(te.a)}(n)}},c.a.createElement(B.a,{className:"has-text-danger",icon:q.k}))))}))),c.a.createElement("div",{className:"is-flex is-justify-content-space-between fixed-button"},c.a.createElement("div",{className:"select mr-1"},c.a.createElement("select",{onChange:function(e){return f(e.target.value)},value:d},ve.map((function(e){return c.a.createElement("option",{key:"dy-".concat(e),value:e},e)})))),c.a.createElement("div",{className:"select mr-1"},c.a.createElement("select",{onChange:function(e){return o(e.target.value)},value:i},Ee.map((function(e,t){return c.a.createElement("option",{key:e,value:he[t]},e)})))),c.a.createElement("div",{className:"select mr-1"},c.a.createElement("select",{onChange:function(e){return p(e.target.value)},value:v},be.map((function(e){return c.a.createElement("option",{key:e,value:e},e)})))),c.a.createElement("button",{className:"button is-black",onClick:function(){a([].concat(Object(me.a)(t),["".concat(v,"-").concat(i,"-").concat(d)]).sort()),s().then(te.a).catch(te.a)}},"Add")))},ge={setEvents:function(e){return{type:"SET_EVENTS",payload:e}},updateHiitrx:k},je=Object(l.b)((function(e){return{events:e.events.sort()}}),ge)(Oe);var Ne=Object(Y.g)((function(e){var t=e.user,a=e.setUser,s=e.updateHiitrx,r=e.history,l=Object(n.useState)(t.name),i=Object(b.a)(l,2),o=i[0],u=i[1],m=Object(n.useState)(t.age),d=Object(b.a)(m,2),f=d[0],h=d[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"m-4"},"Update Your Profile"),c.a.createElement("div",{className:"m-4"},c.a.createElement("label",{className:"label"},"Name"),c.a.createElement("input",{className:"input",type:"text",placeholder:"Name",value:o,onChange:function(e){return u(e.target.value)}})),c.a.createElement("div",{className:"m-4"},c.a.createElement("label",{className:"label"},"Age"),c.a.createElement("input",{className:"input",type:"text",placeholder:"Age",value:f,onChange:function(e){return h(e.target.value)}})),c.a.createElement("div",{className:"m-4 has-text-centered"},c.a.createElement("button",{className:"button is-black",onClick:function(){a({name:o,age:f}),s().then((function(){return r.push("/home")})).catch(te.a)}},"Save")))})),ye={setUser:function(e){return{type:"SET_USER",payload:e}},updateHiitrx:k},xe=Object(l.b)((function(e){return{user:{name:e.name,age:e.age}}}),ye)(Ne);var we=Object(Y.g)((function(e){var t,a=e.isLoaded,n=e.name,s=e.location.pathname,r=a&&["/today","/lift","/results"].includes(s),l=!["/login","/home"].includes(s),i=a&&!["/login","/lift","/workout"].includes(s),o=(t=s,function(e){var a="step-item is-success";return"/today"===t&&0===e&&(a+=" is-active"),"/lift"===t&&(0===e&&(a+=" is-completed"),1===e&&(a+=" is-active")),"/results"===t&&(a+=e<2?" is-completed":" is-active"),a});return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"px-4 is-flex has-background-link-light is-justify-content-space-between is-align-items-center"},c.a.createElement("div",{className:"head-space has-text-info"},c.a.createElement("b",null,"HIITRx")),r&&c.a.createElement("div",{className:"is-flex-grow-1 my-1 px-6"},c.a.createElement("div",{className:"steps is-small"},c.a.createElement("div",{className:o(0)},c.a.createElement("div",{className:"step-marker"},c.a.createElement(B.a,{icon:q.h}))),c.a.createElement("div",{className:o(1)},c.a.createElement("div",{className:"step-marker"},c.a.createElement(B.a,{icon:q.e}))),c.a.createElement("div",{className:o(2)},c.a.createElement("div",{className:"step-marker"},c.a.createElement(B.a,{icon:q.d}))))),c.a.createElement("div",{className:"head-space"},l&&c.a.createElement(U.b,{to:"/home"},c.a.createElement(B.a,{className:"has-text-info",icon:q.f,size:"lg"})))),i&&c.a.createElement("div",{className:"px-4 py-4 is-flex is-justify-content-space-between is-align-items-center"},c.a.createElement("strong",null,"Hello, ",n),c.a.createElement(U.b,{to:"/login"},c.a.createElement("button",{className:"button is-small"},"not ",n,"?"))))})),ke=Object(l.b)((function(e){return{isLoaded:!!e.hash,name:e.name}}))(we);var Se=function(e){var t=e.h,a=e.m,s=e.onChange,r=e.disabled,l=Object(n.useState)(t),i=Object(b.a)(l,2),o=i[0],u=i[1],m=Object(n.useState)(a),d=Object(b.a)(m,2),f=d[0],h=d[1],E=function(e){return function(t){return function(a){a.preventDefault();var n=o,c=f;"h"===e?(1===t&&o<23||-1===t&&o>0)&&(n+=t):(15===t&&f<45||-15===t&&f>0)&&(c+=t),u(n),h(c),n===o&&c===f||s({target:{value:"".concat(n+c/60)}})}}};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"time-picker mt-4 mb-4"},c.a.createElement("div",null,c.a.createElement("button",{onClick:E("h")(-1),className:"button mr-4",disabled:r},"-"),c.a.createElement("button",{onClick:E("h")(1),className:"button",disabled:r},"+")),c.a.createElement("div",{className:"has-text-centered"},"Sleep duration",c.a.createElement("br",null),c.a.createElement("pre",{className:"p-0 has-background-white"},o," hrs ",f," min")),c.a.createElement("div",null,c.a.createElement("button",{onClick:E("m")(-15),className:"button mr-4",disabled:r},"-"),c.a.createElement("button",{onClick:E("m")(15),className:"button",disabled:r},"+"))),c.a.createElement(ne,{scale:["subtract/add hours","subtract/add minutes"]}))};var Te=Object(Y.g)((function(e){var t=e.motivated,a=e.fast,s=e.sleep,r=e.sleepHours,l=e.setToday,i=e.hasReported,o=e.updateHiitrx,d=e.history,f=Object(n.useState)({motivated:t,fast:a,sleep:s,sleepHours:r}),h=Object(b.a)(f,2),E=h[0],v=h[1],p="".concat(r).split("."),O=Object(b.a)(p,2),g=O[0],j=O[1];g=g||8,j=j||0;var N=function(e){return function(t){return v(Object(m.a)(Object(m.a)({},E),{},Object(u.a)({},e,Number(t.target.value.trim()))))}};return c.a.createElement("div",{className:"px-4 py-4"},c.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{htmlFor:"motivated"},"How motivated are you to train?"),c.a.createElement("input",{id:"motivated",name:"motivated",defaultValue:E.motivated,className:"slider is-warning is-fullwidth is-large mt-2",step:".25",min:"0",max:"10",type:"range",onChange:N("motivated"),disabled:i}),c.a.createElement(ne,null)),c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{htmlFor:"fast"},"How fresh do your legs feel?"),c.a.createElement("input",{id:"fast",name:"fast",defaultValue:E.fast,className:"slider is-warning is-fullwidth is-large mt-2",step:".25",min:"0",max:"10",type:"range",onChange:N("fast"),disabled:i}),c.a.createElement(ne,{scale:["Slow","Normal","Fast"]})),c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{htmlFor:"sleep"},"How well did you sleep last night?"),c.a.createElement("input",{id:"sleep",name:"sleep",defaultValue:E.sleep,className:"slider is-warning is-fullwidth is-large mt-2",step:".25",min:"0",max:"10",type:"range",onChange:N("sleep"),disabled:i}),c.a.createElement(ne,{scale:["Worse","Normal","Better"]})),c.a.createElement(Se,{h:Number(g),m:60*Number(".".concat(j)),onChange:N("sleepHours"),disabled:i}),c.a.createElement("div",{className:"has-text-centered"},c.a.createElement("button",{className:"button is-black",onClick:function(){l(E),o().then((function(){return d.push("/lift")})).catch(te.a)}},"Next"))))})),Ie={setToday:function(e){return{type:"SET_TODAY",payload:e}},updateHiitrx:k},Ce=Object(l.b)((function(e){var t=e.schedule[h()];return{motivated:t.motivated||5,fast:t.fast||5,sleep:t.sleep||5,sleepHours:t.sleepHours||8}}),Ie)(Te),Re=a(36),He=a.n(Re),De="Press",Fe=function(e){return e.reduce((function(e,t,a,n){return a%2?e:[].concat(Object(me.a)(e),[n[a+1].timeStamp-t.timeStamp])}),[])};var _e=Object(Y.g)((function(e){var t=e.lifts,a=e.setLifts,s=e.setPressures,r=e.updateHiitrx,l=e.history,i=Object(n.useState)(De),o=Object(b.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)([]),f=Object(b.a)(d,2),h=f[0],E=f[1],v=Object(n.useState)(!1),p=Object(b.a)(v,2),O=p[0],g=p[1],j=Object(n.useState)(!1),N=Object(b.a)(j,2),y=N[0],x=N[1],w=Object(n.useState)(!1),k=Object(b.a)(w,2),S=k[0],T=k[1],I=Object(n.useState)(!1),C=Object(b.a)(I,2),R=C[0],H=C[1],D=Object(n.useState)(!1),F=Object(b.a)(D,2),_=F[0],A=F[1],P=Object(n.useRef)(null),L=Object(n.useRef)(0),W=Object(n.useRef)();if(Object(n.useEffect)((function(){He.a.set("#circle",{start:function(){L.current=0},change:function(e){L.current=e>L.current?e:L.current},unsupported:function(){L.current=-1}},{only:"touch",polyfill:!1})}),[]),Object(n.useEffect)((function(){if(y){var e=1500+Math.round(250*Math.random());P.current=setTimeout((function(){T(!0),E((function(e){return[].concat(Object(me.a)(e),[{timeStamp:Date.now()}])}))}),e)}}),[y]),Object(n.useEffect)((function(){10===h.length&&H(!0)}),[h]),_)return c.a.createElement(K,null);if(t||R){var M=t||Fe(h);return c.a.createElement("div",{className:"table m-4"},c.a.createElement("div",{className:"headings columns is-mobile"},c.a.createElement("div",{className:"column is-6"},"Attempt"),c.a.createElement("div",{className:"column is-6 has-text-centered"},"Reaction Speed")),M.map((function(e,t){return c.a.createElement("div",{key:e,className:"columns is-mobile"},c.a.createElement("div",{className:"column is-6 has-text-weight-bold"},t+1),c.a.createElement("div",{className:"column is-6 has-text-centered"},"".concat(e,"ms")))})),c.a.createElement("div",{className:"column is-12 has-text-centered"},c.a.createElement("button",{className:"button is-info is-light mr-2",onClick:function(){m(De),E([]),g(!1),x(!1),T(!1),H(!1)},disabled:!!t},"Retry"),c.a.createElement("button",{className:"button is-black",onClick:function(){if(t)l.push("/results");else{var e=Fe(h);A(!0),a(e),s(h.map((function(e){return e.pressure}))),r().then((function(){return l.push("/results")})).catch((function(){})),clearTimeout(W.current)}}},"Next")))}return c.a.createElement("div",{className:"px-4 py-4"},c.a.createElement("div",{className:"mb-4"},"Press with your thumb. When the border turns red, lift your thumb. Repeat five times."),c.a.createElement("section",{className:"section py-0 lift",style:{position:"absolute",bottom:30,left:"50%",transform:"translate(-50%)"}},c.a.createElement("div",{id:"circle",className:"circle ".concat(y&&"pressed"," ").concat(S&&"triggered"),onPointerDown:function(e){u===De&&(g(!0),x(!0))},onPointerUp:function(e){x(!1),O&&u===De&&(S?(m("Good"),E([].concat(Object(me.a)(h),[{timeStamp:Date.now(),pressure:L.current}]))):(m("!"),clearTimeout(P.current)),g(!1),T(!1),W.current=setTimeout((function(){return m(De)}),1500))}},u)))})),Ae={setLifts:function(e){return{type:"SET_LIFTS",payload:e}},setPressures:function(e){return{type:"SET_PRESSURES",payload:e}},updateHiitrx:k},Pe=Object(l.b)((function(e){var t;return{lifts:null===(t=e.schedule[h()])||void 0===t?void 0:t.lifts}}),Ae)(_e);var Le=Object(Y.g)((function(e){var t=e.readiness,a=e.fitnessTests,s=e.nextTest,r=e.speed,l=e.getWorkout,i=e.setWorkout,o=e.updateHiitrx,u=e.history,m=Object(n.useState)([!1,!1]),d=Object(b.a)(m,2),f=d[0],h=d[1],E=function(){return o().then((function(){return u.push("/workout")})).catch(te.a)},v=t>=85;return c.a.createElement("div",{className:"m-4"},c.a.createElement("article",{className:"message is-info"},c.a.createElement("div",{className:"message-header"},c.a.createElement("p",null,"HIIT readiness")),c.a.createElement("div",{className:"message-body is-flex is-justify-content-space-between is-align-items-center"},c.a.createElement("div",null,t,"%"),c.a.createElement("div",null,v&&c.a.createElement("button",{className:"button ".concat(f[0]&&"is-loading"),onClick:function(){var e=s.id;return h([!0,!1]),i({fitnessTestId:e,intervals:a[e].intervals}),E()},disabled:f.includes(!0)},"Test ",s.name,"*")))),c.a.createElement("article",{className:"message is-info"},c.a.createElement("div",{className:"message-header"},c.a.createElement("p",null,"Reaction score")),c.a.createElement("div",{className:"message-body"},r," ms")),c.a.createElement("div",{className:"has-text-centered"},c.a.createElement(U.b,{to:"/home"},c.a.createElement("button",{className:"button mr-2",disabled:f.includes(!0)},"Back")),c.a.createElement("button",{className:"button is-black ".concat(f[1]&&"is-loading"),disabled:f.includes(!0),onClick:function(){h([!1,!0]),l().then((function(e){return i(e),E()}))}},"Get Workout")),v&&c.a.createElement("div",{className:"fixed-button p-4 width-100 is-size-7 has-text-justified"},"* Your readiness is sufficient for an all-out fitness test. Regular testing can improve the accuracy and quality of your HIITRx workouts. Testing today will replace your workout."))})),We=[{id:"ac",name:"Aerobic Capacity"},{id:"ap",name:"Aerobic Power"},{id:"nc",name:"Anaerobic Capacity"}],Me=function(e){return["motivated","fast","sleep","sleepHours"].reduce((function(t,a){return t+N[a][e[a]]}),0)},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).sort((function(e,t){return t.localeCompare(e)})).reduce((function(t,a){var n;return a!==h()&&(null===(n=e[a].workout)||void 0===n?void 0:n.fitnessTestId)&&!t.find((function(t){return t===e[a].workout.fitnessTestId}))?[].concat(Object(me.a)(t),[e[a].workout.fitnessTestId]):t}),[]);return t.length<We.length?We.find((function(e){return!t.includes(e.id)})):We.find((function(e){return e.id===t[t.length-1]}))},Ue=function(e){var t=Object(me.a)(e.sort());5===t.length&&(t.pop(),t.shift());var a=t.reduce((function(e,t){return Number(e)+Number(t)}),0)/t.length;return Math.round(a)},Ye={getWorkout:function(){return function(e,t){var a=t().hash;return x("GET","".concat(y,"/workout?hash=").concat(a))}},setWorkout:function(e){return{type:"SET_WORKOUT",payload:e}},updateHiitrx:k},Ke=Object(l.b)((function(e){var t=e.schedule,a=e.fitnessTests,n=t[h()];return{readiness:Me(n),fitnessTests:a,nextTest:ze(t),speed:Ue(n.lifts)}}),Ye)(Le),Ve=function(e){var t=e.running,a=e.disabled,n=e.start,s=e.stop,r=e.reset,l=e.onEnd;return c.a.createElement("div",null,!t&&c.a.createElement("button",{className:"button is-large start is-success mx-2",disabled:a.start,onClick:n},"Start"),t&&c.a.createElement("button",{className:"button is-large stop is-warning mx-2",onClick:s},"Pause"),c.a.createElement("button",{className:"button is-large reset is-black mx-2",disabled:a.reset,onClick:r},"Reset"),l&&c.a.createElement("button",{className:"button is-large is-danger mx-2",onClick:function(){s(),l()}},"End"))},Ge=function(){return e=Date.now(),100*Math.round(e/100);var e},Je=function(e){var t,a,s=e.autoStart,r=e.controls,l=e.onEnd,i=e.direction,o=e.from,u=e.limit,m=e.playBeep,d=e.onComplete,h=e.storageKey,E=-1===i,v={STORAGE_KEY:t=h,RUNNING_KEY:"".concat(t,".running"),STARTED_KEY:"".concat(t,".started")},p=v.STORAGE_KEY,g=v.STARTED_KEY,j=v.RUNNING_KEY,N=!!O.getItem(j),y=Object(n.useState)(N),x=Object(b.a)(y,2),w=x[0],k=x[1],S=Number(O.getItem(g)),T=Object(n.useState)(S),I=Object(b.a)(T,2),C=I[0],R=I[1],H=f(o),D=O.getItem(p);a=D?C?H+i*(Ge()-C):Number(D):H;var F=Object(n.useState)(a),_=Object(b.a)(F,2),A=_[0],P=_[1];Object(n.useEffect)((function(){if(w&&A!==H)switch(A){case 0:var e=function(){return m("high")};e(),setTimeout(e,250),setTimeout(e,500);break;case 5e3:case 4e3:case 3e3:case 2e3:case 1e3:m("low")}}),[w,A,H,m]);var L=Object(n.useRef)(),W=function(){if(L.current=setInterval((function(){return P((function(e){return e+100*i}))}),100),!C){var e;if(E){var t=H-(Number(D)||H);e=Ge()-t}else e=Ge()-A;R(e),O.setItem(g,e)}k(!0),O.setItem(j,!0)},M=function(){clearInterval(L.current),k(!1),R(0),[j,g].forEach(O.removeItem)};Object(n.useEffect)((function(){(w||s)&&W()}),[]),Object(n.useEffect)((function(){(E&&A<=0||!E&&u&&A>=f(u))&&(w&&d&&d(),M()),O.setItem(p,A)}),[A]);var z={start:E?A<=0:u&&A>=f(u),reset:w||A===H};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"time mb-4"},c.a.createElement("pre",{className:"has-background-white is-size-1 p-2"},function(e){var t=Math.trunc(e/1e3/60),a=(e/1e3-60*t).toFixed(1).replace(/^(\d\.\d)/,"0$1");return"".concat(t,":").concat(a)}(A))),r&&c.a.createElement(Ve,{running:w,disabled:z,start:W,stop:M,reset:function(){P(H)},onEnd:l}))},Be=function(e){return"interval-".concat(e)};var qe={setWorkoutCompleted:function(e){return{type:"SET_WORKOUT_COMPLETED",payload:e}},updateHiitrx:k},$e=Object(l.b)((function(e){return{workout:e.schedule[h()].workout}}),qe)((function(e){var t=e.workout,a=e.setWorkoutCompleted,s=e.updateHiitrx,r=(e.history,Object(n.useState)(!1)),l=Object(b.a)(r,2),i=l[0],o=l[1],u=Object(n.useState)(t.completed||0),m=Object(b.a)(u,2),d=m[0],f=m[1],h=Object(n.useState)(!!t.completed),E=Object(b.a)(h,2),v=E[0],p=E[1],g=function(){p(!0),a(d),s().then(te.a).catch(te.a)};Object(n.useEffect)((function(){for(var e=0;e<t.intervals.length;e+=1)O.removeItem(Be(e));o(!0)}),[t.intervals.length]),Object(n.useEffect)((function(){!v&&d&&d===t.intervals.length&&g()}),[d]);var j=t.intervals[d],N=Be(d),y=function(){var e=N;setTimeout((function(){return O.removeItem(e)}),0),f(d+1)},x=j&&!v;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"table m-4"},c.a.createElement("div",{className:"headings columns is-mobile"},c.a.createElement("div",{className:"column is-9"},"Interval"),c.a.createElement("div",{className:"column is-3 has-text-centered"},"Duration")),t.intervals.map((function(e,t){return c.a.createElement("div",{key:"".concat(e.name,"-").concat(t),className:"columns is-mobile ".concat(t===d?"has-background-warning has-text-weight-bold":t%2?"has-background-white-ter":"has-background-white")},c.a.createElement("div",{className:"column is-1"},c.a.createElement("b",null,t+1)),c.a.createElement("div",{className:"column is-8"},t<d&&c.a.createElement(B.a,{className:"mr-2 has-text-success",icon:q.d}),c.a.createElement("span",null,e.name)),c.a.createElement("div",{className:"column is-3 has-text-centered"},e.duration))}))),c.a.createElement("div",{className:"workout-preview-spacer"}),c.a.createElement("div",{className:"workout-timer has-background-white has-text-centered"},x?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"mt-2 mb-0 is-size-2 has-text-info"},j.name),c.a.createElement("div",{className:"mb-2 is-size-5 has-text-info"},j.detail||c.a.createElement(c.a.Fragment,null,"\xa0")),c.a.createElement("div",{className:"mb-5"},t.intervals.map((function(e,t){return i&&t===d?c.a.createElement(Je,{key:N,storageKey:N,controls:!0,onEnd:g,direction:-1,from:e.duration,playBeep:te.a,onComplete:y,autoStart:t>0}):null})))):c.a.createElement("div",{className:"m-4 is-size-3 has-text-success has-text-centered"},c.a.createElement("div",{className:"mb-6"},"Workout Completed!"),c.a.createElement(U.b,{to:"/home"},c.a.createElement("button",{className:"button is-large is-black"},"Done")))))}));function Qe(e){var t=e.motivated,a=e.fast,n=e.sleep,c=e.sleepHours;return!!(t&&a&&n&&c)}var Xe={getHiitrx:w},Ze=Object(l.b)((function(e){var t,a=h();return{isLoaded:!!e.hash,todaysSchedule:(null===(t=e.schedule)||void 0===t?void 0:t[a])||{}}}),Xe)((function(e){var t=e.isLoaded,a=e.getHiitrx,s=e.todaysSchedule,r=Object(n.useState)(!1),l=Object(b.a)(r,2),i=l[0],o=l[1],u=Object(n.useState)(!1),m=Object(b.a)(u,2),d=m[0],f=m[1],h=Object(n.useState)(!1),E=Object(b.a)(h,2),v=E[0],p=E[1],g=Object(n.useRef)(!0),j=Object(n.useState)({isHiitDay:!1,hasReported:!1,hasLifted:!1}),N=Object(b.a)(j,2),y=N[0],x=N[1];return Object(n.useEffect)((function(){var e=O.getItem("hash");e&&g.current?(console.debug("HIITRx: running login effect"),p(!0),a(e).then((function(){return o(!0)})).catch((function(){})).finally((function(){f(!0),p(!1)}))):f(!0),g.current=!1}),[t,a,x]),Object(n.useEffect)((function(){var e,t,a={isHiitDay:!!(null===(e=s.activity)||void 0===e?void 0:e[1]),hasReported:Qe(s),hasLifted:(t=s,!!t.lifts)};x(a)}),[s]),v?c.a.createElement(U.a,null,c.a.createElement(ke,null),c.a.createElement(K,null)):d?c.a.createElement(U.a,null,c.a.createElement(ke,null),c.a.createElement(Y.d,null,c.a.createElement(Y.b,{path:"/login"},c.a.createElement(J,{authenticateApp:o})),!i&&c.a.createElement(Y.a,{to:"/login"}),c.a.createElement(Y.b,{path:"/home"},c.a.createElement(Q,null)),c.a.createElement(Y.b,{path:"/schedule"},c.a.createElement(ue,null)),c.a.createElement(Y.b,{path:"/events"},c.a.createElement(je,null)),c.a.createElement(Y.b,{path:"/user"},c.a.createElement(xe,null)),c.a.createElement(Y.b,{path:"/today"},c.a.createElement(Ce,{hasReported:y.hasReported})),!y.hasReported&&c.a.createElement(Y.a,{to:"/home"}),c.a.createElement(Y.b,{path:"/lift"},c.a.createElement(Pe,null)),!y.hasLifted&&c.a.createElement(Y.a,{to:"/home"}),c.a.createElement(Y.b,{path:"/results"},c.a.createElement(Ke,null)),c.a.createElement(Y.b,{path:"/workout"},c.a.createElement($e,null)),c.a.createElement(Y.a,{to:"/home"}))):null}));window.addEventListener("contextmenu",(function(e){e.preventDefault()})),r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(l.a,{store:z},c.a.createElement(Ze,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.215ca600.chunk.js.map
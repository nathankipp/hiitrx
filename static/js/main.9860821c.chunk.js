(this["webpackJsonptri-tap"]=this["webpackJsonptri-tap"]||[]).push([[0],{28:function(e,t){},465:function(e,t,a){},470:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(57),l=a.n(c),i=(a(66),a(5)),o=a(15),u=a(4),s="local",m="session",d=[{label:"Date",field:"date",type:"hidden",db:m},{label:"Name",field:"name",db:s},{label:"Age",field:"age",type:"number",db:s},{label:"How motivated are you to train?",field:"motivated",type:"slider",db:m},{label:"How fast do you feel?",field:"fast",type:"slider",scale:["Slow","Normal","Fast"],db:m},{label:"How well did you sleep last night?",field:"sleep",type:"slider",scale:["Worse","Normal","Better"],db:m},{label:"Hours of sleep",field:"sleepHours",type:"number",db:m}],f=function(e){var t=d.find((function(t){return t.field===e}));return t&&t.db};function b(e){var t,a=f(e);return a===s?t=window.localStorage.getItem(e):a===m&&(t=window.sessionStorage.getItem(e)),t}var v={items:d,getItem:b,setItem:function(e,t){var a=f(e);a===s?window.localStorage.setItem(e,t):a===m&&window.sessionStorage.setItem(e,t)},isValid:function(){var e=!d.map((function(e){return!!b(e.field)})).includes(!1);return console.log(e),e&&b("date")===(new Date).toLocaleDateString()}},p=a(16),E=a(58),h=a.n(E),g=a(59),w=a(21),y=a(472),j={name:"unspecified",age:"unspecified"};function O(e){var t=e.id,a=void 0===t?Object(y.a)():t,n=e.timestamp,r=void 0===n?Date.now():n,c=e.winNavUa,l=void 0===c?window.navigator.userAgent:c;return Object(g.a)({id:a,timestamp:r,winNavUa:l},v.items.map((function(e){var t=e.field;return Object(w.a)({},t,v.getItem(t)||j[t])})),{},e)}var S=a(17),N=a.n(S);N.a.config.region="us-east-2",N.a.config.credentials=new N.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-2:1056edee-e9e2-4c61-8f7e-45d31a5ab8a4"});var D=new N.a.DynamoDB.DocumentClient;var k="Press";function T(e){for(var t,a=e.clicks,n=e.reset,c=[{item:"Date",value:new Date(a[0].timeStamp).toLocaleDateString()},{item:"Time",value:new Date(a[0].timeStamp).toLocaleTimeString()}],l=[],i=0;i<5;i+=1){var o=2*i,u=(t=a[o].timeStamp,a[o+1].timeStamp-t),s=Math.round(1e3*a[o+1].pressure)/10;c.push({item:"Delay ".concat(i+1),value:"".concat(u,"ms [").concat(s,"%]")}),l.push(u)}return c.push({item:"Average",value:"".concat(Math.round(l.reduce((function(e,t){return e+t}),0)/l.length),"ms")}),r.a.createElement("div",{className:"modal is-active"},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content has-background-white has-text-centered"},r.a.createElement("div",{className:"my-2",style:{maxHeight:"70%",overflow:"auto"}},r.a.createElement("table",{className:"table is-size-7"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Event"),r.a.createElement("th",null,"Result"))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement("tr",{key:e.item},r.a.createElement("td",null,e.item),r.a.createElement("td",null,e.value))}))))),r.a.createElement("div",{className:"button is-primary",onClick:n},"Restart")))}var I=function(){var e=Object(n.useState)(k),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),u=o[0],s=o[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),f=d[0],b=d[1],v=Object(n.useState)(!1),E=Object(i.a)(v,2),g=E[0],w=E[1],y=Object(n.useState)(!1),j=Object(i.a)(y,2),S=j[0],N=j[1],I=Object(n.useState)(!1),x=Object(i.a)(I,2),L=x[0],M=x[1],P=Object(n.useRef)(null),C=Object(n.useRef)(0);Object(n.useEffect)((function(){h.a.set("#circle",{start:function(){C.current=0},change:function(e){C.current=e>C.current?e:C.current},unsupported:function(){C.current=-1}},{only:"touch",polyfill:!1})}),[]);var R=function(){for(var e=[],t=Date.now(),a=function(a){e.push(new Promise((function(e,n){var r,c,l=O({timeStamp:t,trigger:u[a].timeStamp,lift:u[a+1].timeStamp,pressure:u[a+1].pressure});(r=l,c="lift",new Promise((function(e,t){D.put({Item:r,TableName:c},(function(a,n){a?t("Error: data was not saved to ".concat(c)):e()}))}))).then(e).catch(n)})))},n=0;n<u.length;n+=2)a(n);return Promise.all(e)};return Object(n.useEffect)((function(){var e=1500+Math.round(250*Math.random());S&&(P.current=setTimeout((function(){M(!0),s((function(e){return[].concat(Object(p.a)(e),[{timeStamp:Date.now()}])}))}),e))}),[S]),Object(n.useEffect)((function(){10===u.length&&w(!0)}),[u]),r.a.createElement("div",{className:"px-4 py-4"},r.a.createElement("div",{className:"has-text-weight-semibold mb-4"},"Press with your thumb. When the border turns red, lift your thumb. Repeat five times."),r.a.createElement("section",{className:"section py-0 lift",style:{position:"absolute",bottom:20,left:"50%",transform:"translate(-50%)"}},r.a.createElement("div",{id:"circle",className:"circle ".concat(S&&"pressed"," ").concat(L&&"triggered"),onPointerDown:function(e){a===k&&(b(!0),N(!0))},onPointerUp:function(e){N(!1),f&&a===k&&(L?(c("Good"),s([].concat(Object(p.a)(u),[{timeStamp:Date.now(),pressure:C.current}]))):(c("!"),clearTimeout(P.current)),b(!1),M(!1),setTimeout((function(){return c(k)}),1500))}},a)),g&&r.a.createElement(T,{clicks:u,reset:function(){R().finally((function(){w(!1),s([]),function(e,t){c(e),b(t)}(k,!1)}))}}))};a(465);function x(e){var t=e.clicks,a=e.reset,n=[{item:"Date",value:new Date(t[0]).toLocaleDateString()},{item:"Time",value:new Date(t[0]).toLocaleTimeString()}],c=[];return["2-Tap Int 1","3-Tap Int 1","3-Tap Int 2","4-Tap Int 1","4-Tap Int 2","4-Tap Int 3"].forEach((function(e,a){var r,l=0===a?[1,2]:a<3?[a+2,a+3]:[a+3,a+4],i=(r=t[l[0]],t[l[1]]-r);n.push({item:e,value:"".concat(i,"ms")}),c.push(i)})),n.push({item:"Average",value:"".concat(Math.round(c.reduce((function(e,t){return e+t}),0)/c.length),"ms")}),r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"modal"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Event"),r.a.createElement("th",null,"Result"))),r.a.createElement("tbody",null,n.map((function(e){return r.a.createElement("tr",{key:e.item},r.a.createElement("td",null,e.item),r.a.createElement("td",null,e.value))})))),r.a.createElement("div",{className:"reset",onClick:a},"Restart")))}var L=function(){var e=Object(n.useState)("Start"),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),u=o[0],s=o[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),f=d[0],b=d[1],v=Object(n.useState)(!1),E=Object(i.a)(v,2),h=E[0],g=E[1],w=function(e,t){c(e),b(t)};return Object(n.useEffect)((function(){switch(u.length){case 1:setTimeout((function(){w("2",!0)}),500);break;case 3:w("Good",!1),setTimeout((function(){w("3",!0)}),1500);break;case 6:w("Good",!1),setTimeout((function(){w("4",!0)}),1500);break;case 10:w("Done",!1),setTimeout((function(){g(!0)}),1500)}}),[u]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},"Tap Start.  When a number appears, tap the circle that many times as quickly as you can.  Use only your thumb."),r.a.createElement("div",{className:"tap"},r.a.createElement("div",{className:"circle ".concat(f&&"active"),onClick:function(e){if(0===u.length)c("");else if(!f)return;s([].concat(Object(p.a)(u),[Date.now()]))}},a)),h&&r.a.createElement(x,{clicks:u,reset:function(){s([]),w("Start",!1),g(!1)}}))},M=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],P=function(e){return"date"===e?(new Date).toLocaleDateString():v.getItem(e)||""},C=["Less","Normal","More"],R=function(e){var t=e.scale;t=void 0===t?C:t;var a=Object(i.a)(t,3),n=a[0],c=a[1],l=a[2];return r.a.createElement("div",{className:"slider-scale mb-4"},r.a.createElement("div",null,n),r.a.createElement("div",null,c),r.a.createElement("div",null,l))};function F(e){var t=e.onSubmit,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],o=c[1];return l?r.a.createElement(u.a,{to:"/lift"}):r.a.createElement("div",{className:"px-4 py-4"},r.a.createElement("div",{className:"has-text-weight-semibold mb-4"},"My ",M[(new Date).getDay()]," Status"),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){var a=t(e);o(a)}},v.items.map((function(e){var t=e.label,a=e.field,n=e.type,c=e.scale;return r.a.createElement("div",{key:a},"hidden"!==n&&r.a.createElement("label",{htmlFor:a},t),"slider"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{id:a,name:a,defaultValue:P(a),className:"slider is-warning is-fullwidth is-large",step:"1",min:"1",max:"100",type:"range"}),r.a.createElement(R,{scale:c})):r.a.createElement("input",{className:"input mb-4",id:a,name:a,defaultValue:P(a),type:n||"text"}))})),r.a.createElement("div",null,r.a.createElement("input",{className:"button is-primary",type:"submit",value:"Continue"})))))}function H(e){e.x;var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)({}),u=Object(i.a)(o,2),s=u[0],m=u[1];Object(n.useEffect)((function(){var e;(e="lift",new Promise((function(t,a){D.scan({TableName:e},(function(e,n){e?a("data cannot be retrieved"):t(n.Items)}))}))).then(l)}),[]),Object(n.useEffect)((function(){var e={};c.map((function(t){return Object.keys(t).map((function(t){return e[t]=!0}))})),m(e)}),[c]);var d='"'.concat(Object.keys(s).join('","'),'"\n');return c.map((function(e){var t=[];Object.keys(s).map((function(a){t.push(e[a])})),d+='"'.concat(t.join('","'),'"\n')})),r.a.createElement("textarea",{style:{fontSize:"6px",height:"99vh",width:"99vw"},value:d})}function V(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){c((function(e){return v.isValid()})),window.setInterval((function(){v.isValid()||c(!1)}),6e4)}),[]);var l=function(e){e.preventDefault(),v.items.forEach((function(t){var a=t.field,n=(e.target[a].value||"").trim();v.setItem(a,n)}));var t=v.isValid();if(c(t),t)return setTimeout((function(){return window.scrollTo(0,0)}),500),!0};return r.a.createElement(o.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/data/:table(lift|tap)",render:function(e){return r.a.createElement(H,{rp:e})}}),r.a.createElement(u.b,null,r.a.createElement("nav",{className:"navbar has-background-info-dark",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(o.b,{className:"navbar-item is-size-7 has-text-white",to:"/user"},[(new Date).toLocaleDateString(),v.getItem("name")].map((function(e){return e?r.a.createElement(r.a.Fragment,{key:e},e,r.a.createElement("br",null)):null}))),a&&r.a.createElement(o.b,{className:"navbar-item has-text-white",to:"/lift"},"Lift"),!1)),a?r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/lift"},r.a.createElement(I,null)),"// ",r.a.createElement(u.b,{path:"/tap"},"//   ",a?r.a.createElement(L,null):r.a.createElement(u.a,{to:"/user"}),"// "),r.a.createElement(u.b,null,r.a.createElement(F,{onSubmit:l}))):r.a.createElement(F,{onSubmit:l}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.addEventListener("contextmenu",(function(e){e.preventDefault()})),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t,a){e.exports=a(470)},66:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.9860821c.chunk.js.map
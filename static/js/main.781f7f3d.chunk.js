(this["webpackJsonptri-tap"]=this["webpackJsonptri-tap"]||[]).push([[0],{27:function(e,t){},469:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(58),i=n.n(c),l=(n(66),n(18)),o=n(4),u="local",s="session",m=[{label:"Date",field:"date",type:"hidden",db:s},{label:"Name",field:"name",db:u},{label:"Age",field:"age",type:"number",db:u},{label:"How motivated are you to train?",field:"motivated",type:"slider",db:s},{label:"How fast do you feel?",field:"fast",type:"slider",scale:["Slow","Normal","Fast"],db:s},{label:"How well did you sleep last night?",field:"sleep",type:"slider",scale:["Worse","Normal","Better"],db:s},{label:"How long did you sleep?",field:"sleepHours",type:"time",db:s}],d=function(e){var t=m.find((function(t){return t.field===e}));return t&&t.db};function f(e){var t,n=d(e);return n===u?t=window.localStorage.getItem(e):n===s&&(t=window.sessionStorage.getItem(e)),t}var b={items:m,getItem:f,setItem:function(e,t){var n=d(e);n===u?window.localStorage.setItem(e,t):n===s&&window.sessionStorage.setItem(e,t)},isValid:function(){return!m.map((function(e){return!!f(e.field)})).includes(!1)&&f("date")===(new Date).toLocaleDateString()}},p=n(32),v=n(5),E=n(59),h=n.n(E),w=n(20),g=n(28),j=n(471),O={name:"unspecified",age:"unspecified"};function y(e){var t=e.id,n=void 0===t?Object(j.a)():t,a=e.timestamp,r=void 0===a?Date.now():a,c=e.winNavUa,i=void 0===c?window.navigator.userAgent:c;return Object(g.a)({id:n,timestamp:r,winNavUa:i},b.items.reduce((function(e,t){var n=t.field;return Object(g.a)(Object(w.a)({},n,b.getItem(n)||O[n]),e)}),{}),{},e)}var S=n(15),N=n.n(S);N.a.config.region="us-east-2",N.a.config.credentials=new N.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-2:1056edee-e9e2-4c61-8f7e-45d31a5ab8a4"});var k=new N.a.DynamoDB.DocumentClient;var D="Press";var I=function(){var e=Object(a.useState)(D),t=Object(v.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),l=Object(v.a)(i,2),u=l[0],s=l[1],m=Object(a.useState)(!1),d=Object(v.a)(m,2),f=d[0],E=d[1],w=Object(a.useState)(!1),g=Object(v.a)(w,2),j=g[0],O=g[1],S=Object(a.useState)(!1),N=Object(v.a)(S,2),I=N[0],x=N[1],P=Object(a.useState)(!1),C=Object(v.a)(P,2),T=C[0],H=C[1],V=Object(a.useRef)(null),B=Object(a.useRef)(0);Object(a.useEffect)((function(){h.a.set("#circle",{start:function(){B.current=0},change:function(e){B.current=e>B.current?e:B.current},unsupported:function(){B.current=-1}},{only:"touch",polyfill:!1})}),[]);var F=function(){for(var e=[],t=Date.now(),n=function(n){e.push(new Promise((function(e,a){var r,c,i=y({timeStamp:t,trigger:u[n].timeStamp,lift:u[n+1].timeStamp,pressure:u[n+1].pressure});(r=i,c="lift",new Promise((function(e,t){k.put({Item:r,TableName:c},(function(n,a){n?t("Error: data was not saved to ".concat(c)):e()}))}))).then(e).catch(a)})))},a=0;a<u.length;a+=2)n(a);return Promise.all(e)};return Object(a.useEffect)((function(){var e=1500+Math.round(250*Math.random());I&&(V.current=setTimeout((function(){H(!0),s((function(e){return[].concat(Object(p.a)(e),[{timeStamp:Date.now()}])}))}),e))}),[I]),Object(a.useEffect)((function(){10===u.length&&(O(!0),F().finally((function(){window.location.replace("/")})))}),[u]),b.isValid()?r.a.createElement("div",{className:"px-4 py-4"},r.a.createElement("div",{className:"has-text-weight-semibold mb-4"},"Press with your thumb. When the border turns red, lift your thumb. Repeat five times."),r.a.createElement("section",{className:"section py-0 lift",style:{position:"absolute",bottom:20,left:"50%",transform:"translate(-50%)"}},r.a.createElement("div",{id:"circle",className:"circle ".concat(I&&"pressed"," ").concat(T&&"triggered"," ").concat(j&&"is-hidden"),onPointerDown:function(e){n===D&&(E(!0),x(!0))},onPointerUp:function(e){x(!1),f&&n===D&&(T?(c("Good"),s([].concat(Object(p.a)(u),[{timeStamp:Date.now(),pressure:B.current}]))):(c("!"),clearTimeout(V.current)),E(!1),H(!1),setTimeout((function(){return c(D)}),1500))}},n))):r.a.createElement(o.a,{to:"/"})},x=function(e){return"date"===e?(new Date).toLocaleDateString():b.getItem(e)||""},P=["Less","Normal","More"],C=function(e){var t=e.scale,n=void 0===t?P:t;return r.a.createElement("div",{className:"slider-scale mb-4"},n.map((function(e){return r.a.createElement("div",{key:e},e)})))},T=function(e){var t=e.h,n=e.m,c=Object(a.useState)(t),i=Object(v.a)(c,2),l=i[0],o=i[1],u=Object(a.useState)(n),s=Object(v.a)(u,2),m=s[0],d=s[1],f=function(e){return function(t){return function(n){if(n.preventDefault(),"h"===e){var a=l+t;a>=0&&a<25&&o(l+t)}else{var r=m+t;r>=0&&r<60&&d(m+t)}}}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"time-picker mt-4 mb-4"},r.a.createElement("div",null,r.a.createElement("button",{onClick:f("h")(-1),className:"button mr-4"},"-"),r.a.createElement("button",{onClick:f("h")(1),className:"button"},"+")),r.a.createElement("div",null,l," hrs ",m," min"),r.a.createElement("div",null,r.a.createElement("button",{onClick:f("m")(-15),className:"button mr-4"},"-"),r.a.createElement("button",{onClick:f("m")(15),className:"button"},"+"))),r.a.createElement(C,{scale:["subtract/add hours","subtract/add minutes"]}),r.a.createElement("input",{type:"hidden",name:"sleepHours",defaultValue:"".concat(l+m/60)}))};function H(e){var t=e.onSubmit,n=Object(a.useState)(!1),c=Object(v.a)(n,2),i=c[0],l=c[1];return i?r.a.createElement(o.a,{to:"/lift"}):r.a.createElement("div",{className:"px-4 py-4"},r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){t(e).then(l)}},b.items.map((function(e){var t=e.label,n=e.field,a=e.type,c=e.scale;return r.a.createElement("div",{key:n},"hidden"!==a&&r.a.createElement("label",{htmlFor:n},t),function(e,t){var n=t.field,a=t.scale;switch(e){case"slider":return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{id:n,name:n,defaultValue:x(n),className:"slider is-warning is-fullwidth is-large mt-2",step:"1",min:"1",max:"100",type:"range"}),r.a.createElement(C,{scale:a}));case"time":var c=x(n).split("."),i=Object(v.a)(c,2),l=i[0],o=i[1];return l=l||8,o=o||0,r.a.createElement(T,{h:Number(l),m:60*Number(".".concat(o))});case"text":default:return r.a.createElement("input",{className:"input mb-4",id:n,name:n,defaultValue:x(n),type:e||"text"})}}(a,{field:n,scale:c}))})),r.a.createElement("div",{className:"has-text-centered"},r.a.createElement("input",{className:"button is-primary",type:"submit",value:"Next"})))))}function V(e){e.x;var t=Object(a.useState)([]),n=Object(v.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)({}),o=Object(v.a)(l,2),u=o[0],s=o[1];Object(a.useEffect)((function(){var e;(e="lift",new Promise((function(t,n){k.scan({TableName:e},(function(e,a){e?n("data cannot be retrieved"):t(a.Items)}))}))).then(i)}),[]),Object(a.useEffect)((function(){var e={};c.map((function(t){return Object.keys(t).map((function(t){return e[t]=!0}))})),s(e)}),[c]);var m='"'.concat(Object.keys(u).join('","'),'"\n');return c.map((function(e){var t=[];return Object.keys(u).map((function(n){return t.push(e[n])})),m+='"'.concat(t.join('","'),'"\n'),!0})),r.a.createElement("textarea",{style:{fontSize:"6px",height:"99vh",width:"99vw"},value:m})}function B(){return r.a.createElement(l.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/data/:table(lift)",render:function(e){return r.a.createElement(V,{rp:e})}}),r.a.createElement(o.b,null,r.a.createElement("div",{className:"p-2 m-0 has-background-link"},"\xa0"),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/lift"},r.a.createElement(I,null)),r.a.createElement(o.b,null,r.a.createElement(H,{onSubmit:function(e){return e.preventDefault(),new Promise((function(t){b.items.forEach((function(t){var n=t.field,a=(e.target[n].value||"").trim();b.setItem(n,a)})),b.isValid()&&(setTimeout((function(){return window.scrollTo(0,0)}),500),t(!0)),t(!1)}))}}))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.addEventListener("contextmenu",(function(e){e.preventDefault()})),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t,n){e.exports=n(469)},66:function(e,t,n){}},[[61,1,2]]]);
//# sourceMappingURL=main.781f7f3d.chunk.js.map
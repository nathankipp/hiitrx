(this["webpackJsonptri-tap"]=this["webpackJsonptri-tap"]||[]).push([[0],{31:function(e,t){},472:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(62),l=a.n(c),i=(a(70),a(9)),s=a(5),o="local",u="session",m=[{label:"Date",field:"date",type:"hidden",db:u},{label:"Name",field:"name",db:o},{label:"Age",field:"age",type:"number",db:o},{label:"How motivated are you to train?",field:"motivated",type:"slider",db:u},{label:"How fast do you feel?",field:"fast",type:"slider",scale:["Slow","Normal","Fast"],db:u},{label:"How well did you sleep last night?",field:"sleep",type:"slider",scale:["Worse","Normal","Better"],db:u},{label:"How long did you sleep?",field:"sleepHours",type:"time",db:u}],d=function(e){var t=m.find((function(t){return t.field===e}));return t&&t.db};function f(e){var t,a=d(e);return a===o?t=window.localStorage.getItem(e):a===u&&(t=window.sessionStorage.getItem(e)),t}var b={items:m,getItem:f,setItem:function(e,t){var a=d(e);a===o?window.localStorage.setItem(e,t):a===u&&window.sessionStorage.setItem(e,t)},isValid:function(){return!m.map((function(e){return!!f(e.field)})).includes(!1)&&f("date")===(new Date).toLocaleDateString()}},p=a(6),v=a(20),E=a.n(v);E.a.config.region="us-east-2",E.a.config.credentials=new E.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-2:1056edee-e9e2-4c61-8f7e-45d31a5ab8a4"});var h=new E.a.DynamoDB.DocumentClient;function g(e){e.x;var t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)({}),s=Object(p.a)(i,2),o=s[0],u=s[1];Object(n.useEffect)((function(){var e;(e="lift",new Promise((function(t,a){h.scan({TableName:e},(function(e,n){e?a("data cannot be retrieved"):t(n.Items)}))}))).then(l)}),[]),Object(n.useEffect)((function(){var e={};c.map((function(t){return Object.keys(t).map((function(t){return e[t]=!0}))})),u(e)}),[c]);var m='"'.concat(Object.keys(o).join('","'),'"\n');return c.map((function(e){var t=[];return Object.keys(o).map((function(a){return t.push(e[a])})),m+='"'.concat(t.join('","'),'"\n'),!0})),r.a.createElement("textarea",{style:{fontSize:"6px",height:"99vh",width:"99vw"},value:m})}var w=a(13),j=a(14);var N=Object(s.g)((function(e){var t,a=e.location.pathname,n=(t=a,function(e){var a="step-item is-success";return"/today"===t&&0===e&&(a+=" is-active"),"/lift"===t&&(0===e&&(a+=" is-completed"),1===e&&(a+=" is-active")),"/results"===t&&(a+=e<2?" is-completed":" is-active"),a});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tri-tap is-pulled-left ml-4"},r.a.createElement("b",null,"tri-tap")),r.a.createElement("div",{className:"steps is-small mt-1 mb-0 ml-6"},r.a.createElement("div",{className:n(0)},r.a.createElement("div",{className:"step-marker"},r.a.createElement(w.a,{icon:j.c}))),r.a.createElement("div",{className:n(1)},r.a.createElement("div",{className:"step-marker"},r.a.createElement(w.a,{icon:j.b}))),r.a.createElement("div",{className:n(2)},r.a.createElement("div",{className:"step-marker"},r.a.createElement(w.a,{icon:j.a})))))})),O=function(e){return"date"===e?(new Date).toLocaleDateString():b.getItem(e)||""},y=["Less","Normal","More"],S=function(e){var t=e.scale,a=void 0===t?y:t;return r.a.createElement("div",{className:"slider-scale mb-4"},a.map((function(e){return r.a.createElement("div",{key:e},e)})))},k=function(e){var t=e.h,a=e.m,c=Object(n.useState)(t),l=Object(p.a)(c,2),i=l[0],s=l[1],o=Object(n.useState)(a),u=Object(p.a)(o,2),m=u[0],d=u[1],f=function(e){return function(t){return function(a){if(a.preventDefault(),"h"===e){var n=i+t;n>=0&&n<25&&s(i+t)}else{var r=m+t;r>=0&&r<60&&d(m+t)}}}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"time-picker mt-4 mb-4"},r.a.createElement("div",null,r.a.createElement("button",{onClick:f("h")(-1),className:"button mr-4"},"-"),r.a.createElement("button",{onClick:f("h")(1),className:"button"},"+")),r.a.createElement("div",null,i," hrs ",m," min"),r.a.createElement("div",null,r.a.createElement("button",{onClick:f("m")(-15),className:"button mr-4"},"-"),r.a.createElement("button",{onClick:f("m")(15),className:"button"},"+"))),r.a.createElement(S,{scale:["subtract/add hours","subtract/add minutes"]}),r.a.createElement("input",{type:"hidden",name:"sleepHours",defaultValue:"".concat(i+m/60)}))};function I(e){var t=e.onSubmit,a=Object(n.useState)(!1),c=Object(p.a)(a,2),l=c[0],i=c[1];return l?r.a.createElement(s.a,{to:"/lift"}):r.a.createElement("div",{className:"px-4 py-4"},r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){t(e).then(i)}},b.items.map((function(e){var t=e.label,a=e.field,n=e.type,c=e.scale;return r.a.createElement("div",{key:a,id:"".concat(a,"-wrapper")},"hidden"!==n&&r.a.createElement("label",{htmlFor:a},t),function(e,t){var a=t.field,n=t.scale;switch(e){case"slider":return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{id:a,name:a,defaultValue:O(a),className:"slider is-warning is-fullwidth is-large mt-2",step:".25",min:"0",max:"10",type:"range"}),r.a.createElement(S,{scale:n}));case"time":var c=O(a).split("."),l=Object(p.a)(c,2),i=l[0],s=l[1];return i=i||8,s=s||0,r.a.createElement(k,{h:Number(i),m:60*Number(".".concat(s))});case"text":default:return r.a.createElement("input",{className:"input mb-4",id:a,name:a,defaultValue:O(a),type:e||"text"})}}(n,{field:a,scale:c}))})),r.a.createElement("div",{className:"has-text-centered"},r.a.createElement("input",{className:"button is-black",type:"submit",value:"Next"})))))}var D=a(24),x=a(64),P=a.n(x),H=a(12),T=a(19),C=a(474),V={name:"unspecified",age:"unspecified"};function F(e){var t=e.id,a=void 0===t?Object(C.a)():t,n=e.timestamp,r=void 0===n?Date.now():n,c=e.winNavUa,l=void 0===c?window.navigator.userAgent:c;return Object(T.a)({id:a,timestamp:r,winNavUa:l},b.items.reduce((function(e,t){var a=t.field;return Object(T.a)(Object(H.a)({},a,b.getItem(a)||V[a]),e)}),{}),{},e)}var M="Press";var B=Object(s.g)((function(e){var t=e.history,a=Object(n.useState)(M),c=Object(p.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)([]),o=Object(p.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)(!1),f=Object(p.a)(d,2),v=f[0],E=f[1],g=Object(n.useState)(!1),N=Object(p.a)(g,2),O=N[0],y=N[1],S=Object(n.useState)(!1),k=Object(p.a)(S,2),I=k[0],x=k[1],H=Object(n.useState)(!1),T=Object(p.a)(H,2),C=T[0],V=T[1],B=Object(n.useRef)(null),L=Object(n.useRef)(0);Object(n.useEffect)((function(){P.a.set("#circle",{start:function(){L.current=0},change:function(e){L.current=e>L.current?e:L.current},unsupported:function(){L.current=-1}},{only:"touch",polyfill:!1})}),[]);var R=function(){for(var e=[],t=Date.now(),a=function(a){e.push(new Promise((function(e,n){var r,c,l=F({timeStamp:t,trigger:u[a].timeStamp,lift:u[a+1].timeStamp,pressure:u[a+1].pressure});(r=l,c="lift",new Promise((function(e,t){h.put({Item:r,TableName:c},(function(a,n){a?t("Error: data was not saved to ".concat(c)):e()}))}))).then(e).catch(n)})))},n=0;n<u.length;n+=2)a(n);return Promise.all(e)};return Object(n.useEffect)((function(){var e=1500+Math.round(250*Math.random());I&&(B.current=setTimeout((function(){V(!0),m((function(e){return[].concat(Object(D.a)(e),[{timeStamp:Date.now()}])}))}),e))}),[I]),Object(n.useEffect)((function(){10===u.length&&(y(!0),R().finally((function(){var e=u.reduce((function(e,t,a,n){return a%2?e:[].concat(Object(D.a)(e),[n[a+1].timeStamp-t.timeStamp])}),[]);t.push("/results?speed=".concat(e))})))}),[u]),b.isValid()||t.push("/"),r.a.createElement("div",{className:"px-4 py-4"},r.a.createElement("div",{className:"mb-4"},"Press with your thumb. When the border turns red, lift your thumb. Repeat five times."),r.a.createElement("section",{className:"section py-0 lift",style:{position:"absolute",bottom:30,left:"50%",transform:"translate(-50%)"}},O?r.a.createElement("div",{className:"circle"},r.a.createElement(w.a,{spin:!0,size:"1x",icon:j.d})):r.a.createElement("div",{id:"circle",className:"circle ".concat(I&&"pressed"," ").concat(C&&"triggered"),onPointerDown:function(e){l===M&&(E(!0),x(!0))},onPointerUp:function(e){x(!1),v&&l===M&&(C?(i("Good"),m([].concat(Object(D.a)(u),[{timeStamp:Date.now(),pressure:L.current}]))):(i("!"),clearTimeout(B.current)),E(!1),V(!1),setTimeout((function(){return i(M)}),1500))}},l)))})),L=[0,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3,3.25,3.5,3.75,4,4.25,4.5,4.75,5,5.25,5.5,5.75,6,6.25,6.5,6.75,7,7.25,7.5,7.75,8,8.25,8.5,8.75,9,9.25,9.5,9.75,10],R=function(e){return e.reduce((function(e,t,a){return Object(T.a)({},e,Object(H.a)({},L[a],t))}),{})},W={motivated:R([0,2.5,3.125,3.75,4.375,5,5.625,6.25,6.875,7.5,8.125,8.75,9.375,10,10.625,11.25,11.875,12.5,13.125,13.75,14.375,15,15.625,16.25,16.875,17.5,18.125,18.75,19.375,20,20.625,21.25,21.875,22.5,23.125,23.75,24.375,25]),fast:R([0,2.5,3.125,3.75,4.375,5,5.625,6.25,6.875,7.5,8.125,8.75,9.375,10,10.625,11.25,11.875,12.5,13.125,13.75,14.375,15,15.625,16.25,16.875,17.5,18.125,18.75,19.375,20,20.625,21.25,21.875,22.5,23.125,23.75,24.375,25]),sleep:R([0,2.5,3.125,3.75,4.375,5,5.625,6.25,6.875,7.5,8.125,8.75,9.375,10,10.625,11.25,11.875,12.5,13.125,13.75,14.375,15,15.625,16.25,16.875,17.5,18.125,18.75,19.375,20,20.625,21.25,21.875,22.5,23.125,23.75,24.375,25]),sleepHours:R([0,1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.45,1.6,1.95,2.5,3.3,4.2,5.2,6.3,7.5,8.8,10.2,11.7,13.45,15.2,16.95,18.45,19.7,20.95,22.2,23.2,23.95,24.45,24.75,24.9,25,25,25,25,25])};var U=Object(s.g)((function(e){var t=e.location.search,a=["motivated","fast","sleep","sleepHours"].reduce((function(e,t){return e+W[t][b.getItem(t)]}),0),n=t.split("=")[1].split(",").sort();5===n.length&&(n.pop(),n.shift());var c=n.reduce((function(e,t){return Number(e)+Number(t)}),0)/n.length;return r.a.createElement("section",{className:"section"},r.a.createElement("article",{className:"message is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"HIIT readiness")),r.a.createElement("div",{className:"message-body"},a,"%")),r.a.createElement("article",{className:"message is-info"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Reaction score")),r.a.createElement("div",{className:"message-body"},Math.round(c)," ms")),r.a.createElement("div",{className:"has-text-centered"},r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{className:"button is-black"},"Done"))))}));function z(){return r.a.createElement(i.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/data/:table(lift)",render:function(e){return r.a.createElement(g,{rp:e})}}),r.a.createElement(s.b,null,r.a.createElement(N,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/today"},r.a.createElement(I,{onSubmit:function(e){return e.preventDefault(),new Promise((function(t){b.items.forEach((function(t){var a=t.field,n=(e.target[a].value||"").trim();b.setItem(a,n)})),b.isValid()&&(setTimeout((function(){return window.scrollTo(0,0)}),500),t(!0)),t(!1)}))}})),r.a.createElement(s.b,{path:"/lift"},r.a.createElement(B,null)),r.a.createElement(s.b,{path:"/results"},r.a.createElement(U,null)),r.a.createElement(s.b,null,r.a.createElement(s.a,{to:"/today"}))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.addEventListener("contextmenu",(function(e){e.preventDefault()})),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports=a(472)},70:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.73b11176.chunk.js.map
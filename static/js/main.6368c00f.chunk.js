(this["webpackJsonptri-tap"]=this["webpackJsonptri-tap"]||[]).push([[0],{37:function(e,t,a){e.exports=a(59)},42:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(21),s=a.n(r),l=(a(42),a(6)),i=a(18),o=a(34),m=a(11),u=a(1),d=a(2);function f(e){var t=e.split(":").reverse(),a=Object(d.a)(t,2),n=a[0],c=a[1],r=0;return n&&(r+=1e3*+n),c&&(r+=1e3*+c*60),r}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=[e.getFullYear()],a=e.getMonth()+1;t.push(a<10?"0".concat(a):a);var n=e.getDate();return t.push(n<10?"0".concat(n):n),t.join("-")}var v="local",h=[{name:"hash",db:"session"},{name:"workout",db:v}],E=function(e){var t=h.find((function(t){return t.name===e}));return t&&t.db};var p={setItem:function(e,t){E(e)===v?window.localStorage.setItem(e,t):window.sessionStorage.setItem(e,t)},getItem:function(e){return E(e)===v?window.localStorage.getItem(e):window.sessionStorage.getItem(e)},removeItem:function(e){E(e)===v?window.localStorage.removeItem(e):window.sessionStorage.removeItem(e)}},O=[0,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3,3.25,3.5,3.75,4,4.25,4.5,4.75,5,5.25,5.5,5.75,6,6.25,6.5,6.75,7,7.25,7.5,7.75,8,8.25,8.5,8.75,9,9.25,9.5,9.75,10],j=function(e){return e.reduce((function(e,t,a){return Object(u.a)(Object(u.a)({},e),{},Object(m.a)({},O[a],t))}),{})},N={motivated:j([0,2.5,3.125,3.75,4.375,5,5.625,6.25,6.875,7.5,8.125,8.75,9.375,10,10.625,11.25,11.875,12.5,13.125,13.75,14.375,15,15.625,16.25,16.875,17.5,18.125,18.75,19.375,20,20.625,21.25,21.875,22.5,23.125,23.75,24.375,25]),fast:j([0,2.5,3.125,3.75,4.375,5,5.625,6.25,6.875,7.5,8.125,8.75,9.375,10,10.625,11.25,11.875,12.5,13.125,13.75,14.375,15,15.625,16.25,16.875,17.5,18.125,18.75,19.375,20,20.625,21.25,21.875,22.5,23.125,23.75,24.375,25]),sleep:j([0,2.5,3.125,3.75,4.375,5,5.625,6.25,6.875,7.5,8.125,8.75,9.375,10,10.625,11.25,11.875,12.5,13.125,13.75,14.375,15,15.625,16.25,16.875,17.5,18.125,18.75,19.375,20,20.625,21.25,21.875,22.5,23.125,23.75,24.375,25]),sleepHours:j([0,1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.45,1.6,1.95,2.5,3.3,4.2,5.2,6.3,7.5,8.8,10.2,11.7,13.45,15.2,16.95,18.45,19.7,20.95,22.2,23.2,23.95,24.45,24.75,24.9,25,25,25,25,25])},g="https://q1yg2vh97k.execute-api.us-east-2.amazonaws.com/live",y=function(e,t,a){var n={method:e,headers:{"Content-Type":"application/json"}};return a&&(n.body=JSON.stringify(a)),fetch(t,n).then((function(e){return 200===e.status?e:new Error})).then((function(e){return e.json()}))},x=function(e){return function(t){return y("GET","".concat(g,"/hiitrx?hash=").concat(e)).then((function(e){return e?(p.setItem("hash",e.hash),t(w(e)),Promise.resolve(e.hash)):(p.removeItem("hash"),t(k()),Promise.reject())})).catch((function(){return Promise.reject()}))}},S=function(){return function(e,t){return y("POST","".concat(g,"/hiitrx"),t())}},w=function(e){return{type:"LOAD",payload:e}},k=function(){return{type:"RESET"}},R="LOAD",T="RESET",I="SET_ACTIVITY",H="SET_EFFORT",C="SET_TODAY",D="SET_LIFTS",F="SET_PRESSURES",P={date:null,hash:null,email:null,name:null,age:null,schedule:{}},A=Object(i.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,c=b();switch(a){case R:return Object(u.a)(Object(u.a)({},e),n);case T:return Object(u.a)(Object(u.a)({},e),P);case I:return Object(u.a)(Object(u.a)({},e),{},{schedule:Object(u.a)(Object(u.a)({},e.schedule),{},Object(m.a)({},n.date,Object(u.a)(Object(u.a)({},e.schedule[n.date]||{}),{},{activity:n.activity})))});case H:return Object(u.a)(Object(u.a)({},e),{},{schedule:Object(u.a)(Object(u.a)({},e.schedule),{},Object(m.a)({},n.date,Object(u.a)(Object(u.a)({},e.schedule[n.date]||{}),{},{effort:n.effort})))});case C:return Object(u.a)(Object(u.a)({},e),{},{schedule:Object(u.a)(Object(u.a)({},e.schedule),{},Object(m.a)({},c,Object(u.a)(Object(u.a)({},e.schedule[c]),{},{motivated:Number(n.motivated),fast:Number(n.fast),sleep:Number(n.sleep),sleepHours:Number(n.sleepHours)})))});case D:return Object(u.a)(Object(u.a)({},e),{},{schedule:Object(u.a)(Object(u.a)({},e.schedule),{},Object(m.a)({},c,Object(u.a)(Object(u.a)({},e.schedule[c]),{},{lifts:n})))});case F:return Object(u.a)(Object(u.a)({},e),{},{schedule:Object(u.a)(Object(u.a)({},e.schedule),{},Object(m.a)({},c,Object(u.a)(Object(u.a)({},e.schedule[c]),{},{pressures:n})))});default:return e}}),Object(i.a)(o.a)),_=a(7),L=a(5);var z=function(){return c.a.createElement("div",{className:"m-4"},c.a.createElement("progress",{className:"progress is-small is-success",max:"100"},"loading"))};var M=Object(L.g)((function(e){var t=e.reset,a=e.authenticate,r=e.authenticateApp,s=e.history,l=Object(n.useState)(""),i=Object(d.a)(l,2),o=i[0],m=i[1],u=Object(n.useState)(""),f=Object(d.a)(u,2),b=f[0],v=f[1],h=Object(n.useState)(!1),E=Object(d.a)(h,2),O=E[0],j=E[1],N=Object(n.useState)(!1),g=Object(d.a)(N,2),y=g[0],x=g[1];return Object(n.useEffect)((function(){p.removeItem("hash"),t(),r(!1)}),[t,r]),c.a.createElement("div",{className:"hero"},c.a.createElement("div",{className:"hero-body has-text-centered"},c.a.createElement("section",{className:"section is-flex-grow-1"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o&&b?(j(!0),x(!1),a({email:o,password:b}).then((function(e){p.setItem("hash",e),r(!0),s.push("/home")})).catch((function(e){j(!1),x(!0)}))):x(!0)}},c.a.createElement("input",{className:"input mb-4",id:"email",name:"email",defaultValue:"",type:"text",placeholder:"email",autoComplete:"email",onChange:function(e){return m(e.target.value)}}),c.a.createElement("input",{className:"input mb-4",id:"password",name:"password",defaultValue:"",type:"password",placeholder:"password",autoComplete:"current-password",onChange:function(e){return v(e.target.value)}}),c.a.createElement("button",{className:"button is-black ".concat(O?"is-loading":""),type:"submit"},"Go")),y&&c.a.createElement("div",{className:"mt-4 has-text-danger"},"invalid"))))})),Y={reset:k,authenticate:function(e){var t=e.email,a=e.password;return function(e){return y("POST","".concat(g,"/auth"),{email:t,password:a}).then((function(t){var a=t.hash;return x(a)(e)})).catch(Promise.reject)}}},K=Object(l.b)(null,Y)(M),V=a(35),W=a.n(V),G=a(20),U=a.n(G),B=a(13),J=a(14),q=["Less","Normal","More"];var $=function(e){var t=e.scale,a=void 0===t?q:t;return c.a.createElement("div",{className:"slider-scale mb-4"},a.map((function(e){return c.a.createElement("div",{key:e},e)})))},Q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],X=(new Date).getDay(),Z=function(e){return e?1===e?"Tomorrow":(t=X+e)<7?Q[t]:Q[t-7]:"Today";var t},ee=["Rest up!","Enjoy your day off :)","Save some energy","Rest & refuel","Put your feet up","Remember to hydrate","Take a load off"][Math.floor(7*Math.random())];var te=Object(L.g)((function(e){var t=e.schedule,a=e.setActivity,r=e.setEffort,s=e.updateHiitrx,l=e.history,i=Object(n.useState)([]),o=Object(d.a)(i,2),m=o[0],u=o[1],f=Object(n.useRef)(W()((function(){return s().then(U.a).catch(U.a)}),250));Object(n.useEffect)((function(){var e=[];[0,1,2,3,4,5,6].forEach((function(t){var a=new Date(Date.now()+864e5*t);e.push(b(a))})),u(e)}),[]),Object(n.useEffect)((function(){f.current()}),[t]);var v=function(){return s().then((function(){var e,a=(null===(e=t[m[0]])||void 0===e?void 0:e.lifts)?"/results":"/today";l.push(a)})).catch((function(){return console.error("update failed")}))},h=!m.slice(0,4).map((function(e){var a;return((null===(a=t[e])||void 0===a?void 0:a.activity)||[]).includes(1)})).includes(!1);return c.a.createElement("div",{className:"table m-4"},c.a.createElement("div",{className:"headings columns is-mobile"},c.a.createElement("div",{className:"column is-3 forecast-day"},"Day"),c.a.createElement("div",{className:"column is-3 has-text-centered"},"Off"),c.a.createElement("div",{className:"column is-3 has-text-centered"},"HIIT"),c.a.createElement("div",{className:"column is-3 has-text-centered"},"Other")),m.map((function(e,s){var l,i,o,m=function(a){var n,c;return!!(null===(n=t[e])||void 0===n||null===(c=n.activity)||void 0===c?void 0:c[a])?"has-text-success":"has-text-grey-light"},u=function(t){return a({date:e,activity:t})};return c.a.createElement(n.Fragment,{key:e},c.a.createElement("div",{className:"columns is-mobile ".concat(s%2?"has-background-white-ter":"")},c.a.createElement("div",{className:"column is-3 has-text-weight-bold forecast-day"},Z(s)),c.a.createElement("div",{className:"clickable column is-3 is-flex is-justify-content-center is-align-items-center",onClick:function(){return u([1,0,0])}},c.a.createElement(B.a,{className:m(0),icon:J.a,size:"lg"})),c.a.createElement("div",{className:"clickable column is-3 is-flex is-justify-content-center is-align-items-center",onClick:function(){return u([0,1,0])}},c.a.createElement(B.a,{className:m(1),icon:J.h,size:"lg"})),c.a.createElement("div",{className:"clickable column is-3 is-flex is-justify-content-center is-align-items-center is-relative",onClick:function(){return u([0,0,1])}},c.a.createElement(B.a,{className:"mx-1 ".concat(m(2)),icon:J.i,size:"sm"}),c.a.createElement(B.a,{className:"mx-1 ".concat(m(2)),icon:J.b,size:"sm"}),c.a.createElement(B.a,{className:"mx-1 ".concat(m(2)),icon:J.f,size:"sm"}))),function(e,a){var n,c;return!!(null===(n=t[e])||void 0===n||null===(c=n.activity)||void 0===c?void 0:c[1])&&0===a}(e,s)&&c.a.createElement("div",{className:"columns is-mobile ".concat(s%2?"has-background-white-ter":"")},c.a.createElement("div",{className:"column is-12 is-flex is-justify-content-center is-align-items-center"},h?c.a.createElement("button",{className:"button is-large mb-3",onClick:v},"Today's Workout"):c.a.createElement("div",{className:"py-5 has-text-info"},"Plan the next ",4," days to get your workout"))),function(e,a){var n,c;return!!(null===(n=t[e])||void 0===n||null===(c=n.activity)||void 0===c?void 0:c[0])&&0===a}(e,s)&&c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column is-12 has-text-centered"},c.a.createElement("div",{className:"py-5 has-text-info"},ee))),!!(null===(l=t[e])||void 0===l||null===(i=l.activity)||void 0===i?void 0:i[2])&&c.a.createElement("div",{className:"columns is-mobile ".concat(s%2?"has-background-white-ter":"")},c.a.createElement("div",{className:"column is-12 is-flex is-align-items-center"},c.a.createElement("div",{className:"mb-1 mx-4 has-text-centered"},"Anticipated",c.a.createElement("br",null),"Effort"),c.a.createElement("div",{className:"is-flex-grow-1 mx-4"},c.a.createElement("input",{defaultValue:null===t||void 0===t||null===(o=t[e])||void 0===o?void 0:o.effort,className:"slider is-warning is-fullwidth is-large mt-2",step:".25",min:"0",max:"10",type:"range",onChange:function(t){return r({date:e,effort:t.target.value})}}),c.a.createElement($,{scale:["light","moderate","hard"]})))))})))})),ae={setActivity:function(e){return{type:"SET_ACTIVITY",payload:e}},setEffort:function(e){return{type:"SET_EFFORT",payload:e}},updateHiitrx:S},ne=Object(l.b)((function(e){return{schedule:e.schedule}}),ae)(te);var ce=Object(L.g)((function(e){var t,a=e.isLoaded,n=e.name,r=e.location.pathname,s=a&&["/today","/lift","/results"].includes(r),l=!["/login","/home"].includes(r),i=a&&!["/login","/lift","/workout"].includes(r),o=(t=r,function(e){var a="step-item is-success";return"/today"===t&&0===e&&(a+=" is-active"),"/lift"===t&&(0===e&&(a+=" is-completed"),1===e&&(a+=" is-active")),"/results"===t&&(a+=e<2?" is-completed":" is-active"),a});return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"px-4 is-flex has-background-link-light is-justify-content-space-between is-align-items-center"},c.a.createElement("div",{className:"head-space has-text-info"},c.a.createElement("b",null,"HIITRx")),s&&c.a.createElement("div",{className:"is-flex-grow-1 my-1 px-6"},c.a.createElement("div",{className:"steps is-small"},c.a.createElement("div",{className:o(0)},c.a.createElement("div",{className:"step-marker"},c.a.createElement(B.a,{icon:J.g}))),c.a.createElement("div",{className:o(1)},c.a.createElement("div",{className:"step-marker"},c.a.createElement(B.a,{icon:J.e}))),c.a.createElement("div",{className:o(2)},c.a.createElement("div",{className:"step-marker"},c.a.createElement(B.a,{icon:J.d}))))),c.a.createElement("div",{className:"head-space"},l&&c.a.createElement(_.b,{to:"/home"},c.a.createElement(B.a,{className:"has-text-info",icon:J.c,size:"lg"})))),i&&c.a.createElement("div",{className:"px-4 py-4 is-flex is-justify-content-space-between is-align-items-center"},c.a.createElement("strong",null,"Hello, ",n),c.a.createElement(_.b,{to:"/login"},c.a.createElement("button",{className:"button is-small"},"not ",n,"?"))))})),re=Object(l.b)((function(e){return{isLoaded:!!e.hash,name:e.name}}))(ce);var se=function(e){var t=e.h,a=e.m,r=e.onChange,s=e.disabled,l=Object(n.useState)(t),i=Object(d.a)(l,2),o=i[0],m=i[1],u=Object(n.useState)(a),f=Object(d.a)(u,2),b=f[0],v=f[1],h=function(e){return function(t){return function(a){a.preventDefault();var n=o,c=b;"h"===e?(1===t&&o<23||-1===t&&o>0)&&(n+=t):(15===t&&b<45||-15===t&&b>0)&&(c+=t),m(n),v(c),n===o&&c===b||r({target:{value:"".concat(n+c/60)}})}}};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"time-picker mt-4 mb-4"},c.a.createElement("div",null,c.a.createElement("button",{onClick:h("h")(-1),className:"button mr-4",disabled:s},"-"),c.a.createElement("button",{onClick:h("h")(1),className:"button",disabled:s},"+")),c.a.createElement("div",{className:"has-text-centered"},"Sleep duration",c.a.createElement("br",null),c.a.createElement("pre",{className:"p-0 has-background-white"},o," hrs ",b," min")),c.a.createElement("div",null,c.a.createElement("button",{onClick:h("m")(-15),className:"button mr-4",disabled:s},"-"),c.a.createElement("button",{onClick:h("m")(15),className:"button",disabled:s},"+"))),c.a.createElement($,{scale:["subtract/add hours","subtract/add minutes"]}))};var le=Object(L.g)((function(e){var t=e.motivated,a=e.fast,r=e.sleep,s=e.sleepHours,l=e.setToday,i=e.hasReported,o=e.updateHiitrx,f=e.history,b=Object(n.useState)({motivated:t,fast:a,sleep:r,sleepHours:s}),v=Object(d.a)(b,2),h=v[0],E=v[1],p="".concat(s).split("."),O=Object(d.a)(p,2),j=O[0],N=O[1];j=j||8,N=N||0;var g=function(e){return function(t){return E(Object(u.a)(Object(u.a)({},h),{},Object(m.a)({},e,Number(t.target.value.trim()))))}};return c.a.createElement("div",{className:"px-4 py-4"},c.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{htmlFor:"motivated"},"How motivated are you to train?"),c.a.createElement("input",{id:"motivated",name:"motivated",defaultValue:h.motivated,className:"slider is-warning is-fullwidth is-large mt-2",step:".25",min:"0",max:"10",type:"range",onChange:g("motivated"),disabled:i}),c.a.createElement($,null)),c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{htmlFor:"fast"},"How fresh do your legs feel?"),c.a.createElement("input",{id:"fast",name:"fast",defaultValue:h.fast,className:"slider is-warning is-fullwidth is-large mt-2",step:".25",min:"0",max:"10",type:"range",onChange:g("fast"),disabled:i}),c.a.createElement($,{scale:["Slow","Normal","Fast"]})),c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{htmlFor:"sleep"},"How well did you sleep last night?"),c.a.createElement("input",{id:"sleep",name:"sleep",defaultValue:h.sleep,className:"slider is-warning is-fullwidth is-large mt-2",step:".25",min:"0",max:"10",type:"range",onChange:g("sleep"),disabled:i}),c.a.createElement($,{scale:["Worse","Normal","Better"]})),c.a.createElement(se,{h:Number(j),m:60*Number(".".concat(N)),onChange:g("sleepHours"),disabled:i}),c.a.createElement("div",{className:"has-text-centered"},c.a.createElement("button",{className:"button is-black",onClick:function(){l(h),o().then((function(){return f.push("/lift")})).catch(U.a)}},"Next"))))})),ie={setToday:function(e){return{type:"SET_TODAY",payload:e}},updateHiitrx:S},oe=Object(l.b)((function(e){var t=e.schedule[b()];return{motivated:t.motivated||5,fast:t.fast||5,sleep:t.sleep||5,sleepHours:t.sleepHours||8}}),ie)(le),me=a(16),ue=a(36),de=a.n(ue),fe="Press",be=function(e){return e.reduce((function(e,t,a,n){return a%2?e:[].concat(Object(me.a)(e),[n[a+1].timeStamp-t.timeStamp])}),[])};var ve=Object(L.g)((function(e){var t=e.lifts,a=e.setLifts,r=e.setPressures,s=e.updateHiitrx,l=e.history,i=Object(n.useState)(fe),o=Object(d.a)(i,2),m=o[0],u=o[1],f=Object(n.useState)([]),b=Object(d.a)(f,2),v=b[0],h=b[1],E=Object(n.useState)(!1),p=Object(d.a)(E,2),O=p[0],j=p[1],N=Object(n.useState)(!1),g=Object(d.a)(N,2),y=g[0],x=g[1],S=Object(n.useState)(!1),w=Object(d.a)(S,2),k=w[0],R=w[1],T=Object(n.useState)(!1),I=Object(d.a)(T,2),H=I[0],C=I[1],D=Object(n.useState)(!1),F=Object(d.a)(D,2),P=F[0],A=F[1],_=Object(n.useRef)(null),L=Object(n.useRef)(0),M=Object(n.useRef)();if(Object(n.useEffect)((function(){de.a.set("#circle",{start:function(){L.current=0},change:function(e){L.current=e>L.current?e:L.current},unsupported:function(){L.current=-1}},{only:"touch",polyfill:!1})}),[]),Object(n.useEffect)((function(){if(y){var e=1500+Math.round(250*Math.random());_.current=setTimeout((function(){R(!0),h((function(e){return[].concat(Object(me.a)(e),[{timeStamp:Date.now()}])}))}),e)}}),[y]),Object(n.useEffect)((function(){10===v.length&&C(!0)}),[v]),P)return c.a.createElement(z,null);if(t||H){var Y=t||be(v);return c.a.createElement("div",{className:"table m-4"},c.a.createElement("div",{className:"headings columns is-mobile"},c.a.createElement("div",{className:"column is-6"},"Attempt"),c.a.createElement("div",{className:"column is-6 has-text-centered"},"Reaction Speed")),Y.map((function(e,t){return c.a.createElement("div",{key:e,className:"columns is-mobile"},c.a.createElement("div",{className:"column is-6 has-text-weight-bold"},t+1),c.a.createElement("div",{className:"column is-6 has-text-centered"},"".concat(e,"ms")))})),c.a.createElement("div",{className:"column is-12 has-text-centered"},c.a.createElement("button",{className:"button is-info is-light mr-2",onClick:function(){u(fe),h([]),j(!1),x(!1),R(!1),C(!1)},disabled:!!t},"Retry"),c.a.createElement("button",{className:"button is-black",onClick:function(){if(t)l.push("/results");else{var e=be(v);A(!0),a(e),r(v.map((function(e){return e.pressure}))),s().then((function(){return l.push("/results")})).catch((function(){})),clearTimeout(M.current)}}},"Next")))}return c.a.createElement("div",{className:"px-4 py-4"},c.a.createElement("div",{className:"mb-4"},"Press with your thumb. When the border turns red, lift your thumb. Repeat five times."),c.a.createElement("section",{className:"section py-0 lift",style:{position:"absolute",bottom:30,left:"50%",transform:"translate(-50%)"}},c.a.createElement("div",{id:"circle",className:"circle ".concat(y&&"pressed"," ").concat(k&&"triggered"),onPointerDown:function(e){m===fe&&(j(!0),x(!0))},onPointerUp:function(e){x(!1),O&&m===fe&&(k?(u("Good"),h([].concat(Object(me.a)(v),[{timeStamp:Date.now(),pressure:L.current}]))):(u("!"),clearTimeout(_.current)),j(!1),R(!1),M.current=setTimeout((function(){return u(fe)}),1500))}},m)))})),he={setLifts:function(e){return{type:"SET_LIFTS",payload:e}},setPressures:function(e){return{type:"SET_PRESSURES",payload:e}},updateHiitrx:S},Ee=Object(l.b)((function(e){var t;return{lifts:null===(t=e.schedule[b()])||void 0===t?void 0:t.lifts}}),he)(ve);var pe=function(e){var t=e.speed,a=e.readiness;return c.a.createElement("section",{className:"section"},c.a.createElement("article",{className:"message is-info"},c.a.createElement("div",{className:"message-header"},c.a.createElement("p",null,"HIIT readiness")),c.a.createElement("div",{className:"message-body"},a,"%")),c.a.createElement("article",{className:"message is-info"},c.a.createElement("div",{className:"message-header"},c.a.createElement("p",null,"Reaction score")),c.a.createElement("div",{className:"message-body"},t," ms")),c.a.createElement("div",{className:"has-text-centered"},c.a.createElement(_.b,{to:"/home"},c.a.createElement("button",{className:"button mr-2"},"Back")),c.a.createElement(_.b,{to:"/workout"},c.a.createElement("button",{className:"button is-black"},"Preview Workout"))))},Oe=function(e){var t=Object(me.a)(e.sort());5===t.length&&(t.pop(),t.shift());var a=t.reduce((function(e,t){return Number(e)+Number(t)}),0)/t.length;return Math.round(a)},je=function(e){return["motivated","fast","sleep","sleepHours"].reduce((function(t,a){return t+N[a][e[a]]}),0)},Ne=Object(l.b)((function(e){var t=e.schedule[b()];return{speed:Oe(t.lifts),readiness:je(t)}}))(pe);function ge(e){var t=e.intervals,a=e.onNext;return c.a.createElement("div",{className:"table m-4"},c.a.createElement("div",{className:"headings columns is-mobile"},c.a.createElement("div",{className:"column is-9"},"Interval"),c.a.createElement("div",{className:"column is-3 has-text-centered"},"Duration")),t.map((function(e,t){return c.a.createElement("div",{key:"".concat(e.name,"-").concat(t),className:"columns is-mobile ".concat(t%2?"has-background-white-ter":"")},c.a.createElement("div",{className:"column is-1"},c.a.createElement("b",null,t+1)),c.a.createElement("div",{className:"column is-8"},e.name),c.a.createElement("div",{className:"column is-3 has-text-centered"},e.from))})),c.a.createElement("button",{className:"button is-black fixed-button",onClick:a},"Start Workout"))}var ye=function(e){var t=e.running,a=e.disabled,n=e.start,r=e.stop,s=e.reset;return c.a.createElement("div",null,!t&&c.a.createElement("button",{className:"button is-large start is-success mr-4",disabled:a.start,onClick:n},"Start"),t&&c.a.createElement("button",{className:"button is-large stop is-warning mr-4",onClick:r},"Pause"),c.a.createElement("button",{className:"button is-large reset is-black mr-4",disabled:a.reset,onClick:s},"Reset"))},xe=function(){return e=Date.now(),100*Math.round(e/100);var e},Se=function(e){var t,a,r=e.autoStart,s=e.controls,l=e.direction,i=e.from,o=e.limit,m=e.playBeep,u=e.onComplete,b=e.storageKey,v=-1===l,h={STORAGE_KEY:t=b,RUNNING_KEY:"".concat(t,".running"),STARTED_KEY:"".concat(t,".started")},E=h.STORAGE_KEY,O=h.STARTED_KEY,j=h.RUNNING_KEY,N=!!p.getItem(j),g=Object(n.useState)(N),y=Object(d.a)(g,2),x=y[0],S=y[1],w=Number(p.getItem(O)),k=Object(n.useState)(w),R=Object(d.a)(k,2),T=R[0],I=R[1],H=f(i),C=p.getItem(E);a=C?T?H+l*(xe()-T):Number(C):H;var D=Object(n.useState)(a),F=Object(d.a)(D,2),P=F[0],A=F[1];Object(n.useEffect)((function(){if(x&&P!==H)switch(P){case 0:var e=function(){return m("high")};e(),setTimeout(e,250),setTimeout(e,500);break;case 5e3:case 4e3:case 3e3:case 2e3:case 1e3:m("low")}}),[x,P,H,m]);var _=Object(n.useRef)(),L=function(){if(_.current=setInterval((function(){return A((function(e){return e+100*l}))}),100),!T){var e;if(v){var t=H-(Number(C)||H);e=xe()-t}else e=xe()-P;I(e),p.setItem(O,e)}S(!0),p.setItem(j,!0)},z=function(){clearInterval(_.current),S(!1),I(0),[j,O].forEach(p.removeItem)};Object(n.useEffect)((function(){(x||r)&&L()}),[]),Object(n.useEffect)((function(){(v&&P<=0||!v&&o&&P>=f(o))&&(x&&u&&u(),z()),p.setItem(E,P)}),[P]);var M={start:v?P<=0:o&&P>=f(o),reset:x||P===H};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"time mb-4"},c.a.createElement("pre",{className:"has-background-white is-size-1"},function(e){var t=Math.trunc(e/1e3/60),a=(e/1e3-60*t).toFixed(1).replace(/^(\d\.\d)/,"0$1");return"".concat(t,":").concat(a)}(P))),s&&c.a.createElement(ye,{running:x,disabled:M,start:L,stop:z,reset:function(){A(H)}}))};var we=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)({date:null,intervals:[]}),l=Object(d.a)(s,2),i=l[0],o=l[1],m=Object(n.useState)(0),u=Object(d.a)(m,2),f=u[0],v=u[1],h=function(e){};Object(n.useEffect)((function(){p.setItem("workout",JSON.stringify({date:b(),intervals:[{name:"Test beeps 1",detail:"whole number",from:"00:10"},{name:"Test beeps 2",detail:"fraction of sec",from:"00:7.5"},{name:"Warm-up",from:"02:00"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Sprint",detail:"90% HRmax",from:"00:30"},{name:"Rest",from:"00:30"},{name:"Cool-down",from:"05:00"}]}));var e=JSON.parse(p.getItem("workout"));e.intervals.forEach((function(e,t){return p.removeItem("interval-".concat(t))})),o(e)}),[]);var E=i.intervals[f],O="interval-".concat(f),j=function(){var e=O;setTimeout((function(){return p.removeItem(e)}),0),v(f+1)};return a?c.a.createElement(ge,{intervals:i.intervals,onNext:function(){r(!1)}}):c.a.createElement(c.a.Fragment,null,(null===E||void 0===E?void 0:E.name)?c.a.createElement("div",{className:"m-4 has-text-centered"},c.a.createElement("div",{className:"mb-2 is-size-2 has-text-info"},E.name),c.a.createElement("div",{className:"mb-2 is-size-4 has-text-info"},E.detail||c.a.createElement(c.a.Fragment,null,"\xa0")),c.a.createElement("div",{className:"mb-5",onClick:function(){}},i.intervals.map((function(e,t){return t===f?c.a.createElement(Se,{key:O,storageKey:O,controls:!0,direction:-1,from:e.from,playBeep:h,onComplete:j,autoStart:t>0}):null})))):c.a.createElement("div",{className:"m-4 is-size-1 has-text-success has-text-centered"},c.a.createElement("div",{className:"mb-6"},"Workout Completed!"),c.a.createElement(_.b,{to:"/home"},c.a.createElement("button",{className:"button is-large is-black"},"Done"))),i.intervals[f+1]&&c.a.createElement(c.a.Fragment,null,c.a.createElement("hr",{className:"my-4"}),c.a.createElement("div",{className:"m-4 has-text-centered"},c.a.createElement("div",{className:"is-size-5 mb-2"},"Up next"),c.a.createElement("div",{className:"is-size-4 has-text-info"},i.intervals[f+1].name),c.a.createElement("pre",{className:"has-background-white is-size-4"},i.intervals[f+1].from))))};function ke(e){var t=e.motivated,a=e.fast,n=e.sleep,c=e.sleepHours;return!!(t&&a&&n&&c)}var Re={getHiitrx:x},Te=Object(l.b)((function(e){var t,a=b();return{isLoaded:!!e.hash,todaysSchedule:(null===(t=e.schedule)||void 0===t?void 0:t[a])||{}}}),Re)((function(e){var t=e.isLoaded,a=e.getHiitrx,r=e.todaysSchedule,s=Object(n.useState)(!1),l=Object(d.a)(s,2),i=l[0],o=l[1],m=Object(n.useState)(!1),u=Object(d.a)(m,2),f=u[0],b=u[1],v=Object(n.useState)(!1),h=Object(d.a)(v,2),E=h[0],O=h[1],j=Object(n.useRef)(!0),N=Object(n.useState)({isHiitDay:!1,hasReported:!1,hasLifted:!1}),g=Object(d.a)(N,2),y=g[0],x=g[1];return Object(n.useEffect)((function(){var e=p.getItem("hash");e&&j.current?(console.debug("HIITRx: running login effect"),O(!0),a(e).then((function(){return o(!0)})).catch((function(){})).finally((function(){b(!0),O(!1)}))):b(!0),j.current=!1}),[t,a,x]),Object(n.useEffect)((function(){var e,t,a={isHiitDay:!!(null===(e=r.activity)||void 0===e?void 0:e[1]),hasReported:ke(r),hasLifted:(t=r,!!t.lifts)};x(a)}),[r]),E?c.a.createElement(_.a,null,c.a.createElement(re,null),c.a.createElement(z,null)):f?c.a.createElement(_.a,null,c.a.createElement(re,null),c.a.createElement(L.d,null,c.a.createElement(L.b,{path:"/login"},c.a.createElement(K,{authenticateApp:o})),!i&&c.a.createElement(L.a,{to:"/login"}),c.a.createElement(L.b,{path:"/home"},c.a.createElement(ne,null)),c.a.createElement(L.b,{path:"/today"},c.a.createElement(oe,{hasReported:y.hasReported})),!y.hasReported&&c.a.createElement(L.a,{to:"/home"}),c.a.createElement(L.b,{path:"/lift"},c.a.createElement(Ee,null)),!y.hasLifted&&c.a.createElement(L.a,{to:"/home"}),c.a.createElement(L.b,{path:"/results"},c.a.createElement(Ne,null)),c.a.createElement(L.b,{path:"/workout"},c.a.createElement(we,null)),c.a.createElement(L.a,{to:"/home"}))):null}));window.addEventListener("contextmenu",(function(e){e.preventDefault()})),s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(l.a,{store:A},c.a.createElement(Te,null))),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.6368c00f.chunk.js.map